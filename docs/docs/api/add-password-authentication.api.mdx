---
id: add-password-authentication
title: "Add Password Authentication"
description: "Create a new identity provider for the current user that allows the user to login with a password."
sidebar_label: "Add Password Authentication"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Add Password Authentication"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/users/me/providers/password"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Create a new identity provider for the current user that allows the user to login with a password.

You can learn more about this [here](../../docs/guides/auth/oauth2#adding-password-authentication).

### Requirements
- The user registered via an OAuth2 provider.

### Tokens
- A valid [`AccessToken`](../../docs/guides/auth/tokens#access-token) is required.
- A valid [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  is required. This token should match user and session contained in the `AccessToken`.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"password":{"type":"string","description":"The user's chosen password. It must be at least 8 characters long and include at least one uppercase letter, one lowercase letter, one number, and one special character (!@#$%^&*()_+={}[]|\\:;'\"<>,.?/).","example":"S3cur3P@ssw0rd!","pattern":"^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+\\-={}\\[\\]|\\\\:;'\"<,>.?/]).{8,}"}},"required":["password"],"title":"AddPasswordAuthenticationRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success.","content":{"*/*":{"schema":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"oneOf":[{"allOf":[{"type":"object","properties":{"value":{"type":"string"},"logger":{"type":"object","properties":{"isLoggingOff":{"type":"boolean","deprecated":true,"description":"Use isLoggingOff() instead"},"name":{"type":"string"},"isInfoEnabled":{"type":"boolean","deprecated":true,"description":"Use isInfoEnabled() instead"},"isDebugEnabled":{"type":"boolean","deprecated":true,"description":"Use isDebugEnabled() instead"},"isErrorEnabled":{"type":"boolean","deprecated":true,"description":"Use isErrorEnabled() instead"},"isTraceEnabled":{"type":"boolean","deprecated":true,"description":"Use isTraceEnabled() instead"},"isWarnEnabled":{"type":"boolean","deprecated":true,"description":"Use isWarnEnabled() instead"}},"required":["isDebugEnabled","isErrorEnabled","isInfoEnabled","isLoggingOff","isTraceEnabled","isWarnEnabled","name"],"title":"KLogger"}},"required":["logger","value"],"title":"Role"}],"enum":["GUEST"],"title":"Guest"},{"allOf":[{"type":"object","properties":{"value":{"type":"string"},"logger":{"type":"object","properties":{"isLoggingOff":{"type":"boolean","deprecated":true,"description":"Use isLoggingOff() instead"},"name":{"type":"string"},"isInfoEnabled":{"type":"boolean","deprecated":true,"description":"Use isInfoEnabled() instead"},"isDebugEnabled":{"type":"boolean","deprecated":true,"description":"Use isDebugEnabled() instead"},"isErrorEnabled":{"type":"boolean","deprecated":true,"description":"Use isErrorEnabled() instead"},"isTraceEnabled":{"type":"boolean","deprecated":true,"description":"Use isTraceEnabled() instead"},"isWarnEnabled":{"type":"boolean","deprecated":true,"description":"Use isWarnEnabled() instead"}},"required":["isDebugEnabled","isErrorEnabled","isInfoEnabled","isLoggingOff","isTraceEnabled","isWarnEnabled","name"],"title":"KLogger"}},"required":["logger","value"],"title":"Role"}],"enum":["USER","ADMIN"],"title":"User"}]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","email"]},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","email"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"canEdit":{"type":"boolean"},"canDelete":{"type":"boolean"}},"required":["canDelete","canEdit","ownerId","visibility"],"title":"ContentAccessDetailsResponse"},"renditions":{"type":"object","additionalProperties":{"type":"object","properties":{"key":{"type":"string"},"size":{"type":"integer","format":"int64"},"contentType":{"type":"string"},"url":{"type":"string"},"width":{"type":"integer","format":"int32"},"height":{"type":"integer","format":"int32"}},"required":["contentType","key","size","url"],"title":"FileRenditionResponse"}},"originalUrl":{"type":"string"}},"required":["access","createdAt","id","key","renditions","updatedAt"],"title":"FileMetadataResponse"},"createdAt":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["createdAt","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorMethods"],"title":"UserResponse"}}}},"304":{"description":"The following error codes correspond to this status:\n* **`PASSWORD_ALREADY_SET`:** Password is already set.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_EXPIRED`:** Indicates that the access token is expired.\n* **`ACCESS_TOKEN_INVALID`:** Indicates that the access token cannot be decoded.\n* **`AUTHENTICATION_REQUIRED`:** User is not authenticated.\n* **`STEP_UP_TOKEN_EXPIRED`:** Indicates that the step-up token is expired.\n* **`STEP_UP_TOKEN_INVALID`:** Indicates that the step-up token cannot be decoded.\n* **`STEP_UP_TOKEN_MISSING`:** Thrown when the step-up token is missing.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"404":{"description":"The following error codes correspond to this status:\n* **`USER_NOT_FOUND`:** User not found.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"500":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_ALLOWLIST_READING_FAILURE`:** Represents an exception indicating a failure when reading the allowlist for an access token cache.\n* **`DATABASE_FAILURE`:** Exception representing a general failure related to database operations.\n* **`DATABASE_ENCRYPTION_FAILURE`:** Exception representing a general failure related to database encryption operations.\n* **`HASH_FAILURE`:** Exception representing a general failure related to hashing operations.\n* **`POST_COMMIT_SIDE_EFFECT_FAILURE`:** Exception representing a failure to perform a side effect after a successful database operation.\n* **`INVALID_PRINCIPAL_DOCUMENT`:** A requested principal document was stored in an invalid format.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      