---
id: add-password-authentication
title: "Add Password Authentication"
description: "Create a new identity provider for the current user that allows the user to login with a password."
sidebar_label: "Add Password Authentication"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Add Password Authentication"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/users/me/providers/password"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Create a new identity provider for the current user that allows the user to login with a password.

You can learn more about this [here](../../docs/guides/auth/oauth2#adding-password-authentication).

### Requirements
- The user registered via an OAuth2 provider.

### Tokens
- A valid [`AccessToken`](../../docs/guides/auth/tokens#access-token) is required.
- A valid [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  is required. This token should match user and session contained in the `AccessToken`.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"password":{"type":"string","description":"The user's chosen password. It must be at least 8 characters long and include at least one uppercase letter, one lowercase letter, one number, and one special character (!@#$%^&*()_+={}[]|\\:;'\"<>,.?/).","example":"S3cur3P@ssw0rd!","pattern":"^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+\\-={}\\[\\]|\\\\:;'\"<,>.?/]).{8,}"}},"required":["password"],"title":"AddPasswordAuthenticationRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success.","content":{"*/*":{"schema":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"oneOf":[{"allOf":[{"type":"object","properties":{"value":{"type":"string"},"logger":{"type":"object","properties":{"isInfoEnabled":{"type":"boolean","deprecated":true,"description":"Use isInfoEnabled() instead"},"isDebugEnabled":{"type":"boolean","deprecated":true,"description":"Use isDebugEnabled() instead"},"isErrorEnabled":{"type":"boolean","deprecated":true,"description":"Use isErrorEnabled() instead"},"isTraceEnabled":{"type":"boolean","deprecated":true,"description":"Use isTraceEnabled() instead"},"isWarnEnabled":{"type":"boolean","deprecated":true,"description":"Use isWarnEnabled() instead"},"isLoggingOff":{"type":"boolean","deprecated":true,"description":"Use isLoggingOff() instead"},"name":{"type":"string"}},"required":["isDebugEnabled","isErrorEnabled","isInfoEnabled","isLoggingOff","isTraceEnabled","isWarnEnabled","name"],"title":"KLogger"}},"required":["logger","value"],"title":"Role"}],"enum":["GUEST"],"title":"Guest"},{"allOf":[{"type":"object","properties":{"value":{"type":"string"},"logger":{"type":"object","properties":{"isInfoEnabled":{"type":"boolean","deprecated":true,"description":"Use isInfoEnabled() instead"},"isDebugEnabled":{"type":"boolean","deprecated":true,"description":"Use isDebugEnabled() instead"},"isErrorEnabled":{"type":"boolean","deprecated":true,"description":"Use isErrorEnabled() instead"},"isTraceEnabled":{"type":"boolean","deprecated":true,"description":"Use isTraceEnabled() instead"},"isWarnEnabled":{"type":"boolean","deprecated":true,"description":"Use isWarnEnabled() instead"},"isLoggingOff":{"type":"boolean","deprecated":true,"description":"Use isLoggingOff() instead"},"name":{"type":"string"}},"required":["isDebugEnabled","isErrorEnabled","isInfoEnabled","isLoggingOff","isTraceEnabled","isWarnEnabled","name"],"title":"KLogger"}},"required":["logger","value"],"title":"Role"}],"enum":["USER","ADMIN"],"title":"User"}]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","email"]},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","email"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"canEdit":{"type":"boolean"},"canDelete":{"type":"boolean"}},"required":["canDelete","canEdit","ownerId","visibility"],"title":"ContentAccessDetailsResponse"},"renditions":{"type":"object","additionalProperties":{"type":"object","properties":{"key":{"type":"string"},"size":{"type":"integer","format":"int64"},"contentType":{"type":"string"},"url":{"type":"string"},"width":{"type":"integer","format":"int32"},"height":{"type":"integer","format":"int32"}},"required":["contentType","key","size","url"],"title":"FileRenditionResponse"}},"originalUrl":{"type":"string"}},"required":["access","createdAt","id","key","renditions","updatedAt"],"title":"FileMetadataResponse"},"createdAt":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["createdAt","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorMethods"],"title":"UserResponse"}}}},"304":{"description":"The following error codes correspond to this status:\n* **`PASSWORD_ALREADY_SET`:** Password is already set.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_EXPIRED`:** Indicates that the access token is expired.\n* **`ACCESS_TOKEN_INVALID`:** Indicates that the access token cannot be decoded.\n* **`AUTHENTICATION_REQUIRED`:** User is not authenticated.\n* **`STEP_UP_TOKEN_EXPIRED`:** Indicates that the step-up token is expired.\n* **`STEP_UP_TOKEN_INVALID`:** Indicates that the step-up token cannot be decoded.\n* **`STEP_UP_TOKEN_MISSING`:** Thrown when the step-up token is missing.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"404":{"description":"The following error codes correspond to this status:\n* **`USER_NOT_FOUND`:** User not found.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"500":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_ALLOWLIST_READING_FAILURE`:** Represents an exception indicating a failure when reading the allowlist for an access token cache.\n* **`DATABASE_FAILURE`:** Exception representing a general failure related to database operations.\n* **`DATABASE_ENCRYPTION_FAILURE`:** Exception representing a general failure related to database encryption operations.\n* **`HASH_FAILURE`:** Exception representing a general failure related to hashing operations.\n* **`POST_COMMIT_SIDE_EFFECT_FAILURE`:** Exception representing a failure to perform a side effect after a successful database operation.\n* **`INVALID_PRINCIPAL_DOCUMENT`:** A requested principal document was stored in an invalid format.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      