---
id: add-password-authentication
title: "Add Password Authentication"
description: "Create a new identity provider for the current user that allows the user to login with a password."
sidebar_label: "Add Password Authentication"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Add Password Authentication"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/users/me/providers/password"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Create a new identity provider for the current user that allows the user to login with a password.

You can learn more about this [here](../../docs/guides/auth/oauth2#adding-password-authentication).

### Requirements
- The user registered via an OAuth2 provider.

### Tokens
- A valid [`AccessToken`](../../docs/guides/auth/tokens#access-token) is required.
- A valid [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  is required. This token should match user and session contained in the `AccessToken`.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"password":{"type":"string","description":"The user's chosen password. It must be at least 8 characters long and include at least one uppercase letter, one lowercase letter, one number, and one special character (!@#$%^&*()_+={}[]|\\:;'\"<>,.?/).","example":"S3cur3P@ssw0rd!","pattern":"^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+\\-={}\\[\\]|\\\\:;'\"<,>.?/]).{8,}"}},"required":["password"],"title":"AddPasswordAuthenticationRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success.","content":{"*/*":{"schema":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"oneOf":[{"allOf":[{"type":"object","properties":{"value":{"type":"string"},"logger":{"type":"object","properties":{"isInfoEnabled":{"type":"boolean","deprecated":true,"description":"Use isInfoEnabled() instead"},"isDebugEnabled":{"type":"boolean","deprecated":true,"description":"Use isDebugEnabled() instead"},"isErrorEnabled":{"type":"boolean","deprecated":true,"description":"Use isErrorEnabled() instead"},"isTraceEnabled":{"type":"boolean","deprecated":true,"description":"Use isTraceEnabled() instead"},"isWarnEnabled":{"type":"boolean","deprecated":true,"description":"Use isWarnEnabled() instead"},"isLoggingOff":{"type":"boolean","deprecated":true,"description":"Use isLoggingOff() instead"},"name":{"type":"string"}},"required":["isDebugEnabled","isErrorEnabled","isInfoEnabled","isLoggingOff","isTraceEnabled","isWarnEnabled","name"],"title":"KLogger"}},"required":["logger","value"],"title":"Role"}],"enum":["GUEST"],"title":"Guest"},{"allOf":[{"type":"object","properties":{"value":{"type":"string"},"logger":{"type":"object","properties":{"isInfoEnabled":{"type":"boolean","deprecated":true,"description":"Use isInfoEnabled() instead"},"isDebugEnabled":{"type":"boolean","deprecated":true,"description":"Use isDebugEnabled() instead"},"isErrorEnabled":{"type":"boolean","deprecated":true,"description":"Use isErrorEnabled() instead"},"isTraceEnabled":{"type":"boolean","deprecated":true,"description":"Use isTraceEnabled() instead"},"isWarnEnabled":{"type":"boolean","deprecated":true,"description":"Use isWarnEnabled() instead"},"isLoggingOff":{"type":"boolean","deprecated":true,"description":"Use isLoggingOff() instead"},"name":{"type":"string"}},"required":["isDebugEnabled","isErrorEnabled","isInfoEnabled","isLoggingOff","isTraceEnabled","isWarnEnabled","name"],"title":"KLogger"}},"required":["logger","value"],"title":"Role"}],"enum":["USER","ADMIN"],"title":"User"}]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","email"]},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","email"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"canEdit":{"type":"boolean"},"canDelete":{"type":"boolean"}},"required":["canDelete","canEdit","ownerId","visibility"],"title":"ContentAccessDetailsResponse"},"renditions":{"type":"object","additionalProperties":{"type":"object","properties":{"key":{"type":"string"},"size":{"type":"integer","format":"int64"},"contentType":{"type":"string"},"url":{"type":"string"},"width":{"type":"integer","format":"int32"},"height":{"type":"integer","format":"int32"}},"required":["contentType","key","size","url"],"title":"FileRenditionResponse"}},"originalUrl":{"type":"string"}},"required":["access","createdAt","id","key","renditions","updatedAt"],"title":"FileMetadataResponse"},"createdAt":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["createdAt","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorMethods"],"title":"UserResponse"}}}},"207":{"description":"The following error codes correspond to this status:\n* **`POST_COMMIT_SIDE_EFFECT_FAILURE`:** Exception representing a failure to perform a side effect after a successful database operation.\n* **`USER_AVATAR_MAPPING_FAILURE`:** Failed to map avatar metadata.","content":{"application/json":{"schema":{}}}},"304":{"description":"The following error codes correspond to this status:\n* **`PASSWORD_ALREADY_SET`:** Password is already set.","content":{"application/json":{"schema":{}}}},"401":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_EXPIRED`:** Indicates that the access token is expired.\n* **`ACCESS_TOKEN_INVALID`:** Indicates that the access token cannot be decoded.\n* **`STEP_UP_TOKEN_EXPIRED`:** Indicates that the step-up token is expired.\n* **`STEP_UP_TOKEN_INVALID`:** Indicates that the step-up token cannot be decoded.\n* **`STEP_UP_TOKEN_MISSING`:** Thrown when the step-up token is missing.","content":{"application/json":{"schema":{}}}},"404":{"description":"The following error codes correspond to this status:\n* **`USER_NOT_FOUND`:** User not found.","content":{"application/json":{"schema":{}}}},"500":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_ALLOWLIST_READING_FAILURE`:** Represents an exception indicating a failure when reading the allowlist for an access token cache.\n* **`DATABASE_FAILURE`:** Exception representing a general failure related to database operations.\n* **`DATABASE_ENCRYPTION_FAILURE`:** Exception representing a general failure related to database encryption operations.\n* **`HASH_FAILURE`:** Exception representing a general failure related to hashing operations.\n* **`INVALID_PRINCIPAL_DOCUMENT`:** A requested principal document was stored in an invalid format.","content":{"application/json":{"schema":{}}}}}}
>
  
</StatusCodes>


      