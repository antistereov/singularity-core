---
id: create-guest-account
title: "Create Guest Principal"
description: "Create a new [`GUEST`](../../docs/guides/auth/roles#guests) account."
sidebar_label: "Create Guest Principal"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create Guest Principal"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/guests"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Create a new [`GUEST`](../../docs/guides/auth/roles#guests) account.

You can learn more about `GUEST` accounts [here](../../docs/guides/auth/roles#guests).

**Optional session data:**
- The `session` object can be included in the request body.
- Inside the `session` object, you can provide the following optional fields:
    - `browser`: The name of the browser used (e.g., "Chrome", "Firefox").
    - `os`: The operating system of the device (e.g., "Windows", "macOS", "Android").

This information helps users identify and manage authorized sessions, improving overall account security.

### Tokens

If successful, [`AccessToken`](../../docs/guides/auth/tokens#access-token) and 
[`RefreshToken`](../../docs/guides/auth/tokens#refresh-token) 
will automatically be set as HTTP-only cookies.
If [header authentication](../../docs/guides/auth/authentication#header-authentication) is enabled,
[`AccessToken`](../../docs/guides/auth/tokens#access-token) and 
[`RefreshToken`](../../docs/guides/auth/tokens#refresh-token)
will be returned in the response body and can be used as 
bearer tokens in the authorization header for upcoming requests.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"session":{"type":"object","properties":{"browser":{"type":"string","description":"The name of the browser used.","example":"Chrome"},"os":{"type":"string","description":"The operating system of the device.","example":"WIndows"}},"title":"SessionInfoRequest"}},"required":["name"],"title":"CreateGuestRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Registration successful. Returns user details and tokens if header authentication is enabled.","content":{"*/*":{"schema":{"type":"object","properties":{"user":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"oneOf":[{"allOf":[{"type":"object","properties":{"value":{"type":"string"},"logger":{"type":"object","properties":{"isLoggingOff":{"type":"boolean","deprecated":true,"description":"Use isLoggingOff() instead"},"name":{"type":"string"},"isInfoEnabled":{"type":"boolean","deprecated":true,"description":"Use isInfoEnabled() instead"},"isDebugEnabled":{"type":"boolean","deprecated":true,"description":"Use isDebugEnabled() instead"},"isErrorEnabled":{"type":"boolean","deprecated":true,"description":"Use isErrorEnabled() instead"},"isTraceEnabled":{"type":"boolean","deprecated":true,"description":"Use isTraceEnabled() instead"},"isWarnEnabled":{"type":"boolean","deprecated":true,"description":"Use isWarnEnabled() instead"}},"required":["isDebugEnabled","isErrorEnabled","isInfoEnabled","isLoggingOff","isTraceEnabled","isWarnEnabled","name"],"title":"KLogger"}},"required":["logger","value"],"title":"Role"}],"enum":["GUEST"],"title":"Guest"},{"allOf":[{"type":"object","properties":{"value":{"type":"string"},"logger":{"type":"object","properties":{"isLoggingOff":{"type":"boolean","deprecated":true,"description":"Use isLoggingOff() instead"},"name":{"type":"string"},"isInfoEnabled":{"type":"boolean","deprecated":true,"description":"Use isInfoEnabled() instead"},"isDebugEnabled":{"type":"boolean","deprecated":true,"description":"Use isDebugEnabled() instead"},"isErrorEnabled":{"type":"boolean","deprecated":true,"description":"Use isErrorEnabled() instead"},"isTraceEnabled":{"type":"boolean","deprecated":true,"description":"Use isTraceEnabled() instead"},"isWarnEnabled":{"type":"boolean","deprecated":true,"description":"Use isWarnEnabled() instead"}},"required":["isDebugEnabled","isErrorEnabled","isInfoEnabled","isLoggingOff","isTraceEnabled","isWarnEnabled","name"],"title":"KLogger"}},"required":["logger","value"],"title":"Role"}],"enum":["USER","ADMIN"],"title":"User"}]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","email"]},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","email"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"canEdit":{"type":"boolean"},"canDelete":{"type":"boolean"}},"required":["canDelete","canEdit","ownerId","visibility"],"title":"ContentAccessDetailsResponse"},"renditions":{"type":"object","additionalProperties":{"type":"object","properties":{"key":{"type":"string"},"size":{"type":"integer","format":"int64"},"contentType":{"type":"string"},"url":{"type":"string"},"width":{"type":"integer","format":"int32"},"height":{"type":"integer","format":"int32"}},"required":["contentType","key","size","url"],"title":"FileRenditionResponse"}},"originalUrl":{"type":"string"}},"required":["access","createdAt","id","key","renditions","updatedAt"],"title":"FileMetadataResponse"},"createdAt":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["createdAt","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorMethods"],"title":"UserResponse"},"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"location":{"type":"object","properties":{"ipAddress":{"type":"string"},"city":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"City"},"country":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"is_in_european_union":{"type":"boolean"},"iso_code":{"type":"string"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Country"},"continent":{"type":"object","properties":{"code":{"type":"string"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Continent"},"location":{"type":"object","properties":{"accuracy_radius":{"type":"integer","format":"int32"},"average_income":{"type":"integer","format":"int32"},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"metro_code":{"type":"integer","format":"int32","deprecated":true},"population_density":{"type":"integer","format":"int32"},"time_zone":{"type":"string"}},"title":"Location"}},"required":["city","continent","country","ipAddress","location"],"title":"GeolocationResponse"}},"required":["user"],"title":"CreateGuestResponse"}}}},"304":{"description":"The following error codes correspond to this status:\n* **`ALREADY_AUTHENTICATED`:** Principal is already authenticated.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"500":{"description":"The following error codes correspond to this status:\n* **`DATABASE_FAILURE`:** Exception representing a general failure related to database operations.\n* **`DATABASE_ENCRYPTION_FAILURE`:** Exception representing a general failure related to database encryption operations.\n* **`POST_COMMIT_SIDE_EFFECT_FAILURE`:** Exception representing a failure to perform a side effect after a successful database operation.\n* **`ACCESS_TOKEN_CACHE_FAILURE`:** Thrown when an access token could not be created due to an exception in the access token whitelist.\n* **`ACCESS_TOKEN_ENCODING_FAILURE`:** Represents an exception that occurs during the encoding process of an access token.\n* **`ACCESS_TOKEN_CREATION_FAILURE`:** Thrown when a generic exception occurred during the creation of an access token.\n* **`ACCESS_TOKEN_INVALID_PRINCIPAL_DOCUMENT_FAILURE`:** Indicates that the principal document associated with the access token is invalid.\n* **`ACCESS_TOKEN_SECRET_FAILURE`:** Represents an exception that occurs when there is a failure related to the secret required for creating an access token.\n* **`REFRESH_TOKEN_ENCODING_FAILURE`:** Represents an exception that occurs during the encoding process of a refresh token.\n* **`REFRESH_TOKEN_CREATION_FAILURE`:** Thrown when a generic exception occurred during the creation of an access token.\n* **`REFRESH_TOKEN_INVALID_PRINCIPAL_DOCUMENT_FAILURE`:** Indicates that the principal document associated with the access token is invalid.\n* **`REFRESH_TOKEN_SECRET_FAILURE`:** Represents an exception that occurs when there is a failure related to the secret required for creating a refresh token.\n* **`REFRESH_TOKEN_SESSION_UPDATE_FAILURE`:** Thrown when an exception occurs when updating the user sessions after creating a new refresh token.\n* **`INVALID_PRINCIPAL_DOCUMENT`:** A requested principal document was stored in an invalid format.\n* **`COOKIE_CREATION_FAILURE`:** Thrown when an exception occurred during the creation of a cookie.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      