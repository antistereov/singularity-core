---
id: change-preferred-two-factor-method
title: "Change Preferred 2FA Method"
description: "Change the preferred 2FA method."
sidebar_label: "Change Preferred 2FA Method"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Change Preferred 2FA Method"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/preferred-method"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Change the preferred 2FA method.

You can learn more about 2FA methods [here](https://singularity.stereov.io/docs/guides/auth/two-factor).

**Requirements:**
- The user can authenticate using password. 2FA will not work with OAuth2. 
  The OAuth2 provider will validate the second factor if the user enabled it for the provider.
- At least one of [email](https://singularity.stereov.io/docs/guides/auth/two-factor#email) or [TOTP](https://singularity.stereov.io/docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.

**Tokens:**
- A valid [`AccessToken`](https://singularity.stereov.io/docs/guides/auth/tokens#access-token) is required.
- A valid [`StepUpToken`](https://singularity.stereov.io/docs/guides/auth/tokens#step-up-token)
  is required. This token should match user and session contained in the `AccessToken`.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"method":{"type":"string","enum":["totp","mail"]}},"required":["method"],"title":"UpdatePreferredTwoFactorMethodRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Updated user information.","content":{"*/*":{"schema":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"type":"string","enum":["USER","ADMIN","GUEST"]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","mail"]},"twoFactorAuthMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"users":{"type":"object","properties":{"admin":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["admin","editor","isEmpty","viewer"],"title":"ContentAccessPermissions"},"groups":{"type":"object","properties":{"admin":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["admin","editor","isEmpty","viewer"],"title":"ContentAccessPermissions"},"invitations":{"type":"array","items":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"uniqueItems":true}},"required":["groups","invitations","ownerId","users","visibility"],"title":"ContentAccessDetails"},"contentType":{"type":"string"},"url":{"type":"string"},"size":{"type":"integer","format":"int64"},"trusted":{"type":"boolean"},"tags":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["access","contentType","createdAt","id","key","size","tags","trusted","updatedAt","url"],"title":"FileMetadataResponse"},"created":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["created","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorAuthMethods"],"title":"UserResponse"}}}},"400":{"description":"This 2FA method is disabled.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"`AccessToken` or `StepUpToken` are invalid or expired or invalid or expired 2FA code.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      