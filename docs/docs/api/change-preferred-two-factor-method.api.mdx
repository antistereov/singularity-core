---
id: change-preferred-two-factor-method
title: "Change Preferred 2FA Method"
description: "Change the preferred 2FA method."
sidebar_label: "Change Preferred 2FA Method"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Change Preferred 2FA Method"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/preferred-method"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Change the preferred 2FA method.

You can learn more about 2FA methods [here](https://singularity.stereov.io/docs/guides/auth/two-factor).

**Requirements:**
- The user can authenticate using password. 2FA will not work with OAuth2. 
  The OAuth2 provider will validate the second factor if the user enabled it for the provider.
- At least one of [email](https://singularity.stereov.io/docs/guides/auth/two-factor#email) or [TOTP](https://singularity.stereov.io/docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.

**Tokens:**
- A valid [`AccessToken`](https://singularity.stereov.io/docs/guides/auth/tokens#access-token) is required.
- A valid [`StepUpToken`](https://singularity.stereov.io/docs/guides/auth/tokens#step-up-token)
  is required. This token should match user and session contained in the `AccessToken`.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"method":{"type":"string","enum":["totp","mail"]}},"required":["method"],"title":"ChangePreferredTwoFactorMethodRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Updated user information.","content":{"*/*":{"schema":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"type":"string","enum":["USER","ADMIN","GUEST"]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","mail"]},"twoFactorAuthMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"users":{"type":"object","properties":{"admin":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["admin","editor","isEmpty","viewer"],"title":"ContentAccessPermissions"},"groups":{"type":"object","properties":{"admin":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["admin","editor","isEmpty","viewer"],"title":"ContentAccessPermissions"},"invitations":{"type":"array","items":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"uniqueItems":true}},"required":["groups","invitations","ownerId","users","visibility"],"title":"ContentAccessDetails"},"contentType":{"type":"string"},"url":{"type":"string"},"size":{"type":"integer","format":"int64"},"trusted":{"type":"boolean"},"tags":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["access","contentType","createdAt","id","key","size","tags","trusted","updatedAt","url"],"title":"FileMetadataResponse"},"created":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["created","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorAuthMethods"],"title":"UserResponse"}}}},"400":{"description":"This 2FA method is disabled or the user did not set up authentication via password.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"`AccessToken` or `StepUpToken` are invalid or expired or invalid or expired 2FA code.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      