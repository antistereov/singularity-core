---
id: change-preferred-two-factor-method
title: "Change Preferred 2FA Method"
description: "Change the preferred 2FA method."
sidebar_label: "Change Preferred 2FA Method"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Change Preferred 2FA Method"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/preferred-method"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Change the preferred 2FA method.

You can learn more about 2FA methods [here](../../docs/guides/auth/two-factor).

### Requirements
- The user can authenticate using password. 2FA will not work with OAuth2. 
  The OAuth2 provider will validate the second factor if the user enabled it for the provider.
- At least one of [email](../../docs/guides/auth/two-factor#email) or [TOTP](../../docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.

### Tokens
- A valid [`AccessToken`](../../docs/guides/auth/tokens#access-token) is required.
- A valid [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  is required. This token should match user and session contained in the `AccessToken`.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"method":{"type":"string","enum":["totp","email"]}},"required":["method"],"title":"ChangePreferredTwoFactorMethodRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Updated user information.","content":{"*/*":{"schema":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"oneOf":[{"allOf":[{"type":"object","properties":{"value":{"type":"string"},"logger":{"type":"object","properties":{"isInfoEnabled":{"type":"boolean","deprecated":true,"description":"Use isInfoEnabled() instead"},"isDebugEnabled":{"type":"boolean","deprecated":true,"description":"Use isDebugEnabled() instead"},"isErrorEnabled":{"type":"boolean","deprecated":true,"description":"Use isErrorEnabled() instead"},"isTraceEnabled":{"type":"boolean","deprecated":true,"description":"Use isTraceEnabled() instead"},"isWarnEnabled":{"type":"boolean","deprecated":true,"description":"Use isWarnEnabled() instead"},"isLoggingOff":{"type":"boolean","deprecated":true,"description":"Use isLoggingOff() instead"},"name":{"type":"string"}},"required":["isDebugEnabled","isErrorEnabled","isInfoEnabled","isLoggingOff","isTraceEnabled","isWarnEnabled","name"],"title":"KLogger"}},"required":["logger","value"],"title":"Role"}],"enum":["GUEST"],"title":"Guest"},{"allOf":[{"type":"object","properties":{"value":{"type":"string"},"logger":{"type":"object","properties":{"isInfoEnabled":{"type":"boolean","deprecated":true,"description":"Use isInfoEnabled() instead"},"isDebugEnabled":{"type":"boolean","deprecated":true,"description":"Use isDebugEnabled() instead"},"isErrorEnabled":{"type":"boolean","deprecated":true,"description":"Use isErrorEnabled() instead"},"isTraceEnabled":{"type":"boolean","deprecated":true,"description":"Use isTraceEnabled() instead"},"isWarnEnabled":{"type":"boolean","deprecated":true,"description":"Use isWarnEnabled() instead"},"isLoggingOff":{"type":"boolean","deprecated":true,"description":"Use isLoggingOff() instead"},"name":{"type":"string"}},"required":["isDebugEnabled","isErrorEnabled","isInfoEnabled","isLoggingOff","isTraceEnabled","isWarnEnabled","name"],"title":"KLogger"}},"required":["logger","value"],"title":"Role"}],"enum":["USER","ADMIN"],"title":"User"}]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","email"]},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","email"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"canEdit":{"type":"boolean"},"canDelete":{"type":"boolean"}},"required":["canDelete","canEdit","ownerId","visibility"],"title":"ContentAccessDetailsResponse"},"renditions":{"type":"object","additionalProperties":{"type":"object","properties":{"key":{"type":"string"},"size":{"type":"integer","format":"int64"},"contentType":{"type":"string"},"url":{"type":"string"},"width":{"type":"integer","format":"int32"},"height":{"type":"integer","format":"int32"}},"required":["contentType","key","size","url"],"title":"FileRenditionResponse"}},"originalUrl":{"type":"string"}},"required":["access","createdAt","id","key","renditions","updatedAt"],"title":"FileMetadataResponse"},"createdAt":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["createdAt","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorMethods"],"title":"UserResponse"}}}},"207":{"description":"The following error codes correspond to this status:\n* **`POST_COMMIT_SIDE_EFFECT_FAILURE`:** Exception representing a failure to perform a side effect after a successful database operation.\n* **`USER_AVATAR_MAPPING_FAILURE`:** Failed to map avatar metadata.","content":{"application/json":{"schema":{}}}},"400":{"description":"The following error codes correspond to this status:\n* **`NO_PASSWORD_PROVIDER`:** The user needs to set a password in to perform this action.\n* **`2FA_DISABLED`:** User needs to set up two-factor authentication to complete this action.","content":{"application/json":{"schema":{}}}},"401":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_EXPIRED`:** Indicates that the access token is expired.\n* **`ACCESS_TOKEN_INVALID`:** Indicates that the access token cannot be decoded.\n* **`STEP_UP_TOKEN_EXPIRED`:** Indicates that the step-up token is expired.\n* **`STEP_UP_TOKEN_INVALID`:** Indicates that the step-up token cannot be decoded.\n* **`STEP_UP_TOKEN_MISSING`:** Thrown when the step-up token is missing.","content":{"application/json":{"schema":{}}}},"404":{"description":"The following error codes correspond to this status:\n* **`USER_NOT_FOUND`:** User not found.","content":{"application/json":{"schema":{}}}},"500":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_ALLOWLIST_READING_FAILURE`:** Represents an exception indicating a failure when reading the allowlist for an access token cache.\n* **`DATABASE_FAILURE`:** Exception representing a general failure related to database operations.\n* **`DATABASE_ENCRYPTION_FAILURE`:** Exception representing a general failure related to database encryption operations.\n* **`INVALID_USER_DOCUMENT`:** A requested user document was stored in an invalid format.\n* **`INVALID_PRINCIPAL_DOCUMENT`:** A requested principal document was stored in an invalid format.","content":{"application/json":{"schema":{}}}}}}
>
  
</StatusCodes>


      