---
id: change-preferred-two-factor-method
title: "Change Preferred 2FA Method"
description: "Change the preferred 2FA method."
sidebar_label: "Change Preferred 2FA Method"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Change Preferred 2FA Method"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/preferred-method"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Change the preferred 2FA method.

You can learn more about 2FA methods [here](../../docs/guides/auth/two-factor).

### Requirements
- The user can authenticate using password. 2FA will not work with OAuth2. 
  The OAuth2 provider will validate the second factor if the user enabled it for the provider.
- At least one of [email](../../docs/guides/auth/two-factor#email) or [TOTP](../../docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.

### Tokens
- A valid [`AccessToken`](../../docs/guides/auth/tokens#access-token) is required.
- A valid [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  is required. This token should match user and session contained in the `AccessToken`.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"method":{"type":"string","enum":["totp","mail"]}},"required":["method"],"title":"ChangePreferredTwoFactorMethodRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Updated user information.","content":{"*/*":{"schema":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"type":"string","enum":["USER","ADMIN","GUEST"]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","mail"]},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"users":{"type":"object","properties":{"maintainer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["editor","isEmpty","maintainer","viewer"],"title":"ContentAccessPermissions"},"groups":{"type":"object","properties":{"maintainer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["editor","isEmpty","maintainer","viewer"],"title":"ContentAccessPermissions"},"invitations":{"type":"array","items":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"uniqueItems":true}},"required":["groups","invitations","ownerId","users","visibility"],"title":"ContentAccessDetails"},"renditions":{"type":"object","additionalProperties":{"type":"object","properties":{"key":{"type":"string"},"size":{"type":"integer","format":"int64"},"contentType":{"type":"string"},"url":{"type":"string"},"width":{"type":"integer","format":"int32"},"height":{"type":"integer","format":"int32"}},"required":["contentType","key","size","url"],"title":"FileRenditionResponse"}},"trusted":{"type":"boolean"},"tags":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["access","createdAt","id","key","renditions","tags","trusted","updatedAt"],"title":"FileMetadataResponse"},"created":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["created","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorMethods"],"title":"UserResponse"}}}},"400":{"description":"This 2FA method is disabled or the user did not set up authentication via password.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"`AccessToken` or `StepUpToken` are invalid or expired or invalid or expired 2FA code.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      