---
id: change-preferred-two-factor-method
title: "Change Preferred 2FA Method"
description: "Change the preferred 2FA method."
sidebar_label: "Change Preferred 2FA Method"
hide_title: true
hide_table_of_contents: true
api: eJztWm1z27gR/isoPdNpNKKUc246V3/oVBc7OV+Ti8aW767jeBKYhCScSYIFQCmqx//9dhcgCcp0IsduJ23zxRbBBbD77At2F7yOLF+Y6OA8mq1V/IInVmk2qexSFFYm3EpVRBfDKBUm0bKkx4Po+ZIXC8GAiJVazIXWImX7LyYsF3ap0tHb4m3xD1WxhBcsE1wXLFdaMH6pKhvQGXa+FFpc/GlpbWkOxmMji0WVcS3tZmQsvFKrkVTjVCVmvKgkMDHmwNrYAqtzYvUJ7bW3t8dOxD8rqUUOfJu3RcxmwFxlhCYmeCsQjsI2rOTGrJVOR8TQWmYZK5RlMHQFT3bJ3iAK+yP2tmC0mHsGgdUKONFuyopnMsVFEQsjElWkzHHG5JwGiQdR8MsMMJKWzeGVA86tM0JmJxZxMpapQjA1Z+ci5zJ7CDB7tMITBrudz97Mpg9ayypbPmHcdHRnlqrKUnYpaukaVczUlShICRMHEDt/P0kSYQy9ef8ZvNCKe5wWienpCZOGaaf0dNTd7NSK8qx84GZAUsZV6XdDKwg3BJOAR3pXI5FzmyydvjmYgQFWwV0Y2ITlskDtF6T5DhajaBiJD8BNwbND4CQ6uI4qnYGTPUBfCfonTIthu7jx0NhpLroZRqoUmnz7OIWdiFxMazoIBC4OvHb0wwilFsZ+r9IN8ocSgTfhT16WmQ8T498MBofryCRLMD78ZTelgPXV5W8isbAO2DxsbKUgMT07LZ2xGphGQIoqx5CEdgePaMnRxc2NYwThx5d+OgQnK20mmrB0lxwnTojopruQ1ZWgAVOqwjjO9p8+xX/doHdWoqOnTsGyAD/OSW7UYIDIYDy4Dwgy/TSNlTkwzvMyIJWw4UJooHWMuKFn+6hd5LMP1oYSCWJcNUIsavje0O7HZCAFz3uWgBcUVnrfgCVChLWbqQ9sJqDiWvMNcCCtyE3PbFSAysQ9prRGcnZ6dAKPk8PXxz/B/5dnR6czsJZhVBUSNH7s5ns1E/s/Cy3nUoTIXyrYnhcoRwZxeJJYueoHwNZWhcfBkYt8/QuVdznUzhYf7OamfhZAt7yIr7jl+r/WNq/EplcziRbooBO76/pgIs6n7zPFnUGfBkatC6GPv0wEV9LIS5mBs37MbqYnxz9PZkcwMj37/tXxc/hx+sPk5OjQeZfpuvhdQR6OPjr+9D3CwR2+m0pwhAcvs5Ji/QjcSHOUlx0AG9ffOqg83+2UYYhKw1B4kLnjxOUJU6FzSamEQV4WWlXlV+D/88DLYiUtnfi7ROEvx9lvY7gFk7eoroTDJoDVrt4JG3dhdigA3Yzw0qIA/LfgamDhqXvJs2kXoI/Cd1foN/Jf4pOI/vlbOiUcuzOi7DM53Z/erGVqlztqbSnkYml3It7SRcidO+m8cI6xAPYXMhMnNcQnPnt1RqArqBPuSEpctf8gF9xi2R+I4fmLyWDDfmAHfvuWxfAE3pINEh4Or3grWrNDL5+34uIjiFbvt503DgOfSaO+1LeTRvp0us5x78ghe5K9AJIz8MFAy8jpt31VCpWlbZmONWsqjes++M4DFTApFMrY7zDCsqoMGyRYs64kbxskD6pv+gLeJzIsILeV2dHVIMHuHE2tdmFfwxf9Tl7yji+HZUh4ftDaDUPDQJhAM0dIdUs139xWTafuR2V0+hSMawFlpWthwEvxoUQ+8GfPKGo4Uan4qpz7KgdlEEmlKfk9v/bhi3Twg+ApJijnF7hso5p2+GbYoX+u1JUUt+jb4ZuLYdPliEplSAMkXTTmpXR9m/05H9/q0SCTekUZ9vluDaFou0l7KHLF3CoRMt4uAmtkKuHZEjg6+O4phJHtua/wNUvFSmSqxJZqs9BFC98pWpk3pDCgtXGkA0cbmEv5dzoZtiIX9dKwPWoqwnheZdtxiRqzFIupxVaHqCG4SEo0xYJcI+zU9TSiP7ft7BqDbaMt7rLnW4WjOuAfIC7vHOm7Luk7IqWcCxtwDqKmuuyYXYMbsnsLNRdTfCMSwXP9x85mI/boGHQ6sSgwhRzKNWALCgfux4s6KPz4y2xLwF0NYycR//0SepW68bv01xMG7mH3MLnnMOZZptZo2W5rvB8gFxRg40ZVGgYfX/xu9zuQH1+8q8q7APhYJLhl0f9HkeDXuL1fi7vYxLMQyqUDiU67OSh4eY9gcOJmeFexivnGPSvEurYex/rjY+G5/YyQ0HPU/o/5zK8xZnrxWbmLqneNG1+Wsr2k/kV/dABB8Y7opL1NOvoA+Vomwtsg166mfstcuSTVpXKnLYtsMj2+hccvIktULhAJrHIGAf3gDwzvJqk2ApEqzGicnSQKkyyaALVeugGJYjheGNSspYI81sBENLOueQ3dEZTzAnJYXGxIQcgn4sE4LMwtI7YgxYuBYC4XFSbwFL/eFh0u6QJ1MHgBRSfQGAZTOXuZ8SIRg8EBvozZYNANHuyPDEtD9rrZ82AwYMdFklUADwMXI97dfjo0GTPEADmk+20XSFdU39YiokRYsMaX3ADD3qJQRhgd4SzHzyEU6cCFbwNtMXLU4DinQgZMC0IgOiYxxPsww6XNBqwwd/CZqiyVhiXyKrMyBjwWFdDWU4eshhWrXGb5Aq8+Hf+XlcxsLAtac0sCNkGdEAV7P4GaKMnEe5ZA3W7w1OCZUfUlfRqIOxWaCh1QCkh96nNhlBU/EgDDxMluVS/iHCwOIlCBq6VVQiEfjU0WwI7DX5K+EBaNHxNkMpcEkrtHTrSoAXIYLnRwCIJ6VU43k1diAxpzlj1qDN6zhHxUReomojKQR7eluqwgbFzyBKwipUxfAlJDlstEq/YR5oAzVFkWQ5mVXLHg7tfQdn8dDH5SViAWp2jyrRP5IxjLV5gibasyYgdcNviMwJe0YCfo/j6wnLqg5PtgQTEUFkD+crKe/rfgJV7sgRhYBbaLvpy+Wj1jr/z49tLr9Xq0KKqR0ouxnwvBsMziZ6OnI1GMljbP6DYFIogLQd+M/jJ6SiUsVFagsGAr/8nMtPO5THPB3olkwQX71y9tvn5p8/VLm8f70sZnVFZ8sOMyA9qg4+8aM+eYbuH9BPAH//bnPApu8uP2oxNsniD59TWej2c6u7nBYUht9Ma1hFYAAKrLdY7qbA/7OXSNUV+cxL7ZD5BWLt3b+qQGmzduBopT2oAW+32dJtP0zekME23/pU6uUsrK+Bq7z/D3IMKbnbK5lqGx66g+U+G925I+E6g6fbitLJ4EqTPUYhMwBYgQBcEOqPgb+8jlhDcXsPjv5kw/bA==
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Change Preferred 2FA Method"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/preferred-method"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Change the preferred 2FA method.

You can learn more about 2FA methods [here](https://singularity.stereov.io/docs/guides/auth/two-factor).

### Requirements
- The user can authenticate using password. 2FA will not work with OAuth2. 
  The OAuth2 provider will validate the second factor if the user enabled it for the provider.
- At least one of [email](https://singularity.stereov.io/docs/guides/auth/two-factor#email) or [TOTP](https://singularity.stereov.io/docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.

### Tokens
- A valid [`AccessToken`](https://singularity.stereov.io/docs/guides/auth/tokens#access-token) is required.
- A valid [`StepUpToken`](https://singularity.stereov.io/docs/guides/auth/tokens#step-up-token)
  is required. This token should match user and session contained in the `AccessToken`.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"method":{"type":"string","enum":["totp","mail"]}},"required":["method"],"title":"ChangePreferredTwoFactorMethodRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Updated user information.","content":{"*/*":{"schema":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"type":"string","enum":["USER","ADMIN","GUEST"]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","mail"]},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"users":{"type":"object","properties":{"maintainer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["editor","isEmpty","maintainer","viewer"],"title":"ContentAccessPermissions"},"groups":{"type":"object","properties":{"maintainer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["editor","isEmpty","maintainer","viewer"],"title":"ContentAccessPermissions"},"invitations":{"type":"array","items":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"uniqueItems":true}},"required":["groups","invitations","ownerId","users","visibility"],"title":"ContentAccessDetails"},"renditions":{"type":"object","additionalProperties":{"type":"object","properties":{"key":{"type":"string"},"size":{"type":"integer","format":"int64"},"contentType":{"type":"string"},"url":{"type":"string"},"width":{"type":"integer","format":"int32"},"height":{"type":"integer","format":"int32"}},"required":["contentType","key","size","url"],"title":"FileRenditionResponse"}},"trusted":{"type":"boolean"},"tags":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["access","createdAt","id","key","renditions","tags","trusted","updatedAt"],"title":"FileMetadataResponse"},"created":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["created","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorMethods"],"title":"UserResponse"}}}},"400":{"description":"This 2FA method is disabled or the user did not set up authentication via password.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"`AccessToken` or `StepUpToken` are invalid or expired or invalid or expired 2FA code.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      