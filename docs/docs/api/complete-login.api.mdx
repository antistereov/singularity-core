---
id: complete-login
title: "Complete Login"
description: "Complete second factor for login."
sidebar_label: "Complete Login"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Complete Login"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/login"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Complete second factor for login.

You can learn more about the login flow [here](../../docs/guides/auth/authentication#login).

**Requirements:**
- User authenticated using their password through [`POST /api/auth/login`](../../docs/api/login).
- At least one of [email](../../docs/guides/auth/two-factor#email) or [TOTP](../../docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.
- An `email` or `totp` 2FA code is present for an enabled 2FA method.
  Check out [email](../../docs/guides/auth/two-factor#email) and [TOTP](../../docs/guides/auth/two-factor#totp)
  to learn how to retrieve a 2FA code.
  
**Optional session data:**
- The `session` object can be included in the request body.
- Inside the `session` object, you can provide the following optional fields:
    - `browser`: The name of the browser used (e.g., "Chrome", "Firefox").
    - `os`: The operating system of the device (e.g., "Windows", "macOS", "Android").

This information helps users identify and manage authorized sessions, improving overall account security.

**Tokens:**
- A valid [`TwoFactorAuthenticationToken`](../../docs/guides/auth/tokens#two-factor-authentication-token)
  is required. This token will be set automatically as HTTP-only cookie through [`POST /api/auth/login`](../../docs/api/login)
  or can be retrieved from the response and set as header manually if [header authentication](../../docs/guides/authentication#header-authentication) 
  is enabled.
- If this action is successful, [`AccessToken`](../../docs/guides/auth/tokens#access-token) and 
  [`RefreshToken`](../../docs/guides/auth/tokens#refresh-token) 
  will automatically be set as HTTP-only cookies.
  If [header authentication](../../docs/guides/auth/authentication#header-authentication) is enabled,
  [`AccessToken`](../../docs/guides/auth/tokens#access-token) and 
  [`RefreshToken`](../../docs/guides/auth/tokens#refresh-token)
  will be returned in the response body and can be used as 
  bearer tokens in the authorization header for upcoming requests.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"totp":{"type":"integer","format":"int32"},"session":{"type":"object","properties":{"browser":{"type":"string","description":"The name of the browser used.","example":"Chrome"},"os":{"type":"string","description":"The operating system of the device.","example":"WIndows"}},"title":"SessionInfoRequest"}},"title":"CompleteLoginRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Information about the user and the tokens if header authentication is enabled.","content":{"*/*":{"schema":{"type":"object","properties":{"user":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"type":"string","enum":["USER","ADMIN","GUEST"]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","mail"]},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"users":{"type":"object","properties":{"admin":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["admin","editor","isEmpty","viewer"],"title":"ContentAccessPermissions"},"groups":{"type":"object","properties":{"admin":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["admin","editor","isEmpty","viewer"],"title":"ContentAccessPermissions"},"invitations":{"type":"array","items":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"uniqueItems":true}},"required":["groups","invitations","ownerId","users","visibility"],"title":"ContentAccessDetails"},"contentType":{"type":"string"},"url":{"type":"string"},"size":{"type":"integer","format":"int64"},"trusted":{"type":"boolean"},"tags":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["access","contentType","createdAt","id","key","size","tags","trusted","updatedAt","url"],"title":"FileMetadataResponse"},"created":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["created","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorMethods"],"title":"UserResponse"},"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"twoFactorRequired":{"type":"boolean"},"allowedTwoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"preferredTwoFactorMethod":{"type":"string","enum":["totp","mail"]},"twoFactorAuthenticationToken":{"type":"string"},"location":{"type":"object","properties":{"ipAddress":{"type":"string"},"city":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"City"},"country":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"is_in_european_union":{"type":"boolean"},"iso_code":{"type":"string"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Country"},"continent":{"type":"object","properties":{"code":{"type":"string"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Continent"},"location":{"type":"object","properties":{"accuracy_radius":{"type":"integer","format":"int32"},"average_income":{"type":"integer","format":"int32"},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"metro_code":{"type":"integer","format":"int32","deprecated":true},"population_density":{"type":"integer","format":"int32"},"time_zone":{"type":"string"}},"title":"Location"}},"required":["city","continent","country","ipAddress","location"],"title":"GeolocationResponse"}},"required":["twoFactorRequired","user"],"title":"LoginResponse"}}}},"304":{"description":"User is already authenticated.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"400":{"description":"No 2FA code for an enabled 2FA method was provided or 2FA is disabled.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"Invalid or expired `TwoFactorAuthenticationToken`.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      