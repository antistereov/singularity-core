---
id: complete-login
title: "Complete Login"
description: "Complete second factor for login."
sidebar_label: "Complete Login"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Complete Login"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/login"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Complete second factor for login.

You can learn more about the login flow [here](https://singularity.stereov.io/docs/guides/auth/authentication#login).

**Requirements:**
- User authenticated using their password through [`POST /api/auth/login`](https://singularity.stereov.io/docs/api/login).
- At least one of [email](https://singularity.stereov.io/docs/guides/auth/two-factor#email) or [TOTP](https://singularity.stereov.io/docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.
- An `email` or `totp` 2FA code is present for an enabled 2FA method.
  Check out [email](https://singularity.stereov.io/docs/guides/auth/two-factor#email) and [TOTP](https://singularity.stereov.io/docs/guides/auth/two-factor#totp)
  to learn how to retrieve a 2FA code.
  
**Optional session data:**
- The `session` object can be included in the request body.
- Inside the `session` object, you can provide the following optional fields:
    - `browser`: The name of the browser used (e.g., "Chrome", "Firefox").
    - `os`: The operating system of the device (e.g., "Windows", "macOS", "Android").

This information helps users identify and manage authorized sessions, improving overall account security.

**Tokens:**
- A valid [`TwoFactorAuthenticationToken`](https://singularity.stereov.io/docs/guides/auth/tokens#two-factor-authentication-token)
  is required. This token will be set automatically as HTTP-only cookie through [`POST /api/auth/login`](https://singularity.stereov.io/docs/api/login)
  or can be retrieved from the response and set as header manually if [header authentication](https://singularity.stereov.io/docs/guides/authentication#header-authentication) 
  is enabled.
- If this action is successful, [`AccessToken`](https://singularity.stereov.io/docs/guides/auth/tokens#access-token) and 
  [`RefreshToken`](https://singularity.stereov.io/docs/guides/auth/tokens#refresh-token) 
  will automatically be set as HTTP-only cookies.
  If [header authentication](https://singularity.stereov.io/docs/guides/auth/authentication#header-authentication) is enabled,
  [`AccessToken`](https://singularity.stereov.io/docs/guides/auth/tokens#access-token) and 
  [`RefreshToken`](https://singularity.stereov.io/docs/guides/auth/tokens#refresh-token)
  will be returned in the response body and can be used as 
  bearer tokens in the authorization header for upcoming requests.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"totp":{"type":"integer","format":"int32"},"session":{"type":"object","properties":{"browser":{"type":"string","description":"The name of the browser used.","example":"Chrome"},"os":{"type":"string","description":"The operating system of the device.","example":"WIndows"}},"title":"SessionInfoRequest"}},"title":"CompleteLoginRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Information about the user and the tokens if header authentication is enabled.","content":{"*/*":{"schema":{"type":"object","properties":{"user":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"type":"string","enum":["USER","ADMIN","GUEST"]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","mail"]},"twoFactorAuthMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"users":{"type":"object","properties":{"admin":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["admin","editor","isEmpty","viewer"],"title":"ContentAccessPermissions"},"groups":{"type":"object","properties":{"admin":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["admin","editor","isEmpty","viewer"],"title":"ContentAccessPermissions"},"invitations":{"type":"array","items":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"uniqueItems":true}},"required":["groups","invitations","ownerId","users","visibility"],"title":"ContentAccessDetails"},"contentType":{"type":"string"},"url":{"type":"string"},"size":{"type":"integer","format":"int64"},"trusted":{"type":"boolean"},"tags":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["access","contentType","createdAt","id","key","size","tags","trusted","updatedAt","url"],"title":"FileMetadataResponse"},"created":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["created","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorAuthMethods"],"title":"UserResponse"},"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"twoFactorRequired":{"type":"boolean"},"allowedTwoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"twoFactorAuthenticationToken":{"type":"string"},"location":{"type":"object","properties":{"ipAddress":{"type":"string"},"city":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"City"},"country":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"is_in_european_union":{"type":"boolean"},"iso_code":{"type":"string"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Country"},"continent":{"type":"object","properties":{"code":{"type":"string"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Continent"},"location":{"type":"object","properties":{"accuracy_radius":{"type":"integer","format":"int32"},"average_income":{"type":"integer","format":"int32"},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"metro_code":{"type":"integer","format":"int32","deprecated":true},"population_density":{"type":"integer","format":"int32"},"time_zone":{"type":"string"}},"title":"Location"}},"required":["city","continent","country","ipAddress","location"],"title":"GeolocationResponse"}},"required":["twoFactorRequired","user"],"title":"LoginResponse"}}}},"400":{"description":"No 2FA code for an enabled 2FA method was provided or 2FA is disabled.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"Invalid or expired `TwoFactorAuthenticationToken`.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      