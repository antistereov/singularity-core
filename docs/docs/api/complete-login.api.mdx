---
id: complete-login
title: "Complete Login"
description: "Complete second factor for login."
sidebar_label: "Complete Login"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Complete Login"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/login"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Complete second factor for login.

You can learn more about the login flow [here](https://singularity.stereov.io/docs/guides/auth/authentication#login).

**Requirements:**
- User authenticated using their password through [`POST /api/auth/login`](https://singularity.stereov.io/docs/api/login).
- At least one of [email](https://singularity.stereov.io/docs/guides/auth/two-factor#email) or [TOTP](https://singularity.stereov.io/docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.
- An `email` or `totp` 2FA code is present for an enabled 2FA method.
  Check out [email](https://singularity.stereov.io/docs/guides/auth/two-factor#email) and [TOTP](https://singularity.stereov.io/docs/guides/auth/two-factor#totp)
  to learn how to retrieve a 2FA code.
  
**Optional session data:**
- The `session` object can be included in the request body.
- Inside the `session` object, you can provide the following optional fields:
    - `browser`: The name of the browser used (e.g., "Chrome", "Firefox").
    - `os`: The operating system of the device (e.g., "Windows", "macOS", "Android").

This information helps users identify and manage authorized sessions, improving overall account security.

**Tokens:**
- A valid [`TwoFactorAuthenticationToken`](https://singularity.stereov.io/docs/guides/auth/tokens#two-factor-authentication-token)
  is required. This token will be set automatically as HTTP-only cookie through [`POST /api/auth/login`](https://singularity.stereov.io/docs/api/login)
  or can be retrieved from the response and set as header manually if [header authentication](https://singularity.stereov.io/docs/guides/authentication#header-authentication) 
  is enabled.
- If this action is successful, [`AccessToken`](https://singularity.stereov.io/docs/guides/auth/tokens#access-token) and 
  [`RefreshToken`](https://singularity.stereov.io/docs/guides/auth/tokens#refresh-token) 
  will automatically be set as HTTP-only cookies.
  If [header authentication](https://singularity.stereov.io/docs/guides/auth/authentication#header-authentication) is enabled,
  [`AccessToken`](https://singularity.stereov.io/docs/guides/auth/tokens#access-token) and 
  [`RefreshToken`](https://singularity.stereov.io/docs/guides/auth/tokens#refresh-token)
  will be returned in the response body and can be used as 
  bearer tokens in the authorization header for upcoming requests.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"totp":{"type":"integer","format":"int32"},"session":{"type":"object","properties":{"browser":{"type":"string","description":"The name of the browser used.","example":"Chrome"},"os":{"type":"string","description":"The operating system of the device.","example":"WIndows"}},"title":"SessionInfoRequest"}},"title":"CompleteLoginRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Information about the user and the tokens if header authentication is enabled.","content":{"*/*":{"schema":{"type":"object","properties":{"user":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"type":"string","enum":["USER","ADMIN","GUEST"]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","mail"]},"twoFactorAuthMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"users":{"type":"object","properties":{"admin":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["admin","editor","isEmpty","viewer"],"title":"ContentAccessPermissions"},"groups":{"type":"object","properties":{"admin":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["admin","editor","isEmpty","viewer"],"title":"ContentAccessPermissions"},"invitations":{"type":"array","items":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"uniqueItems":true}},"required":["groups","invitations","ownerId","users","visibility"],"title":"ContentAccessDetails"},"contentType":{"type":"string"},"url":{"type":"string"},"size":{"type":"integer","format":"int64"},"trusted":{"type":"boolean"},"tags":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["access","contentType","createdAt","id","key","size","tags","trusted","updatedAt","url"],"title":"FileMetadataResponse"},"created":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["created","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorAuthMethods"],"title":"UserResponse"},"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"twoFactorRequired":{"type":"boolean"},"allowedTwoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"twoFactorAuthenticationToken":{"type":"string"},"location":{"type":"object","properties":{"ipAddress":{"type":"string"},"city":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"City"},"country":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"is_in_european_union":{"type":"boolean"},"iso_code":{"type":"string"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Country"},"continent":{"type":"object","properties":{"code":{"type":"string"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Continent"},"location":{"type":"object","properties":{"accuracy_radius":{"type":"integer","format":"int32"},"average_income":{"type":"integer","format":"int32"},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"metro_code":{"type":"integer","format":"int32","deprecated":true},"population_density":{"type":"integer","format":"int32"},"time_zone":{"type":"string"}},"title":"Location"}},"required":["city","continent","country","ipAddress","location"],"title":"GeolocationResponse"}},"required":["twoFactorRequired","user"],"title":"LoginResponse"}}}},"304":{"description":"User is already authenticated.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"400":{"description":"No 2FA code for an enabled 2FA method was provided or 2FA is disabled.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"Invalid or expired `TwoFactorAuthenticationToken`.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      