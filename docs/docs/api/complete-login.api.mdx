---
id: complete-login
title: "Complete Login"
description: "Complete second factor for login."
sidebar_label: "Complete Login"
hide_title: true
hide_table_of_contents: true
api: eJztWm1v2zgS/is8FThsDdvJtsXh4A+H8zZp13vdbZA42z0kQUxLtM2tLOpIyq436H+/mSElUY6SOG32rkXzoakskcOZZ95IzlxFls9NNDiLxmvVe8VjqzQbFnYhMitjbqXKootulAgTa5nTz0H0Ui3zVFjBjIhVlrCZmzaDf6may6x/np1n/1YFi3nGUsF1xpZKC8anqrAMaLthbJaqNTtbCC0uvltYm5vB3p6R2bxIuZZ20zcWPqlVX6q9RMVmb15IYGSPA3v0p+bxCRF8Sgs/efKEHYv/FFKLJYww51mPnRqhWTBFJKzAlZAZqVnOjVkrncBPrYr5gp1Njt6ejNkez6VbjuhPdmMTJ1X89NjQIgbGMpUJpmbsTCy5TO8vsQUFOaSfEIWnDPA+G78dH30WLats/pRxw569GrKlsAuVGGYWqkgTNhVMZHyaisRJkrEJLT3BpSc4c0LTYpUIJg3LtTCAMFkCqN7PDSgDGcZeLkT8nqEpPBwUHMzwgbBAFq3ydrsAC4UfWlgtxQpMuJKXRDnPOp235BY8BW8wBp5Ywi0fdDqI2BhsfeLfA2jT30VsySsAWZnFaZEAPOAJ6BMabFaAmUxVsiG4R5kBLunbNo0u23j3yrValaNmKgWPQrNWJU8zKdLEDJBXxnpsMtVqDb4wGRBrGV+SSeJk/wX8Alj6TvTn/S47j16CQyzFeYTPr8CjZurDefS0X9FTxpNSudDgirC22QDay5JsIlYyFjXBdzJLYCFHccnjtyfucZglWsnEET/PxgswJ5mBIS3JwdlCpLlB5jS8T9CNZxvS+pJnfC7IuZWWfwDzHivTZXJJ8CAgK2AvTRmPY1WAhULkKsgyyogxVu9FRrFiyFY8lWBOEwiJLiI2AyIN3TEWNAyNlnhS21uvGcR6NIDsD4TXLoQlfUZY0De2liDDFAOvRYkVghODXBt04B/H46OeyuBHrNR7KR46miFj4NjefEuXgPAPJuIt2OSAuyC9EIsG9MYTsCrQUkF8yhlGfHrXlP6zU4CjuoXpU+bhDOPYCE0T3oES0LTgyRRxDFYzK9IuoDWkH5+pZk5EvE4JEeTkbHIsZoDT4jOpa0elJI+kyTaaRlFaynXbMOTCo/+1MmpFdB0aXx3UFdLOBQqdhRHc2z+GcOLD+wrFVNACTp5CXgG8HfFyZhm9ylhHKsEsWuSxWmIA89nB9KNuJD4A1xDdD4DjaHAVFTqFXdmn573oYzfy8VtlowRoxX6H9wYdH1b0q/8AcuGCsOuzoFZ85HmeevXu/W5we3gVmXgBaRmf7CYXQM4lLaAD4RjWsWB/+JVydzDMQETJ5sgNJuLgg4Tl5kIDAZcQ3Kvnz3Coj/Z3r+YT3PX1tre3t2VGBz9HdHAjTNmR4DO70b09TTapvxtRqow+IiDS0rsTJ+0IMuOx00nj88tQb/WAj06DmE6igdWFoBfOWInxZ/v7+F+T31GQfuute0Fb6SyhH6UVz1hrGAkDL4gWmE1nr3MfSymairthlEzuHmPlEjABiHc0L9jMiTbVViNxQA+pNhTxllYHX4J3aEutVn6z/bsdjt0cud2dDq2La803wIEE82mxOlK2SsU9pgAnWbHEQ+DpyeEx/Bwe/Dz6Bf5/fXp4Mo4ugGKRSTCmkZvvLYjY/1VoCZvMEPmpguV5hnKkcO4ZQpZdtQNgww3WoTOUdkJwspgJDfZb7cl+pgPFbcJQEClRvgiXc3M/CaEtokCVr2C///Va53uxadVNrAWek4d2V/pgJHly3ykudd8NjFpnQo++TARX0sipTMFdbzOco+PRr8PxIbw5Ov3hzeglPJz8ODw+PCDThI3CYSJtu/HDxwOBYb3tcyO2nwVja6LdCr4Gsxdh3qDI7HZjB8KCcZtjnyAiWiEDQnioatMAT9xHnh41dXGrpm4yPAOHuDuV97cXBIxje0wjW0jRxqjl/VomdrGjgSyEnC/sToO3VRFw5/zMC+cYC+B/JVNxXEJc475N0DtL6JuYKirigZZCZ9xaCIIfxyuKUL+3ODt8ncMxMr9PCmrLF9vgBCI0E0m1npftei5s5BWfX8ukd0NSaQn+ASx4PRjCwetTSat0OjhY3J7YjiuR2xz7z0lID5srW+4+WkVOlb8uvjsR5sMk0c2wH+SdZhy9gQb41gwNI747VDg3nguFdnLZyMK3xRYc/SnRrtqGhdtylIniVZFZ/UWIJ82lzC5Fgcvy7BL8taG6wEilUZd44dmqrQdFyaPjA7vM/FnhLqhuYO3/q/FKgHu5BgSeQvN4c6l5Iguzo/I5Xm7OQdIsVstdLSYFlmzRwA5iwbQ5OlEFhE8nQza/z/ilsPqa3dzIDx6VIWxRZaY6X+QqL1IC7hJcwTTjwm2i4W7t8g+VtdlFoKM3pVqu5SZcKjTC2nO7QfQKFBvkktdCla+DTN5c4Hp66Loj7kXIHR3h670A0Hi+/+L6MZ1qW3ibmUJKxXunsMz1ecfuts30HRt6GG53NlzIUqrlQobMxxgw6dZvOW9s3sJzb4Cxo10x1A2ECVA+xFFbKL9ouwz5RdWVrhvLW2zNTVmRSfCuHD+BahJpHuAS5FvVxvdtV1OuRgMQiw85LsJur9Y8In9f5Olq1RXJgMzVrRvCH+nyD4bBzvH2kS+p+kAjLyhJ0L4UQr0h1EmiqC5UPZtxV3xCAYRe0U3Y2W433tfuXw/EUjFHJUI+ayJAA2N2ugA2Bn/fB//fnou5IsVbWpGqHNsKKkIXNU4naE7eYnbAoN7r5/JfdIDbui+mkh8Gm7o8tX3BupZ2wWjXTneyZSNDl0k4CsbuptkHoaqg2NKZ8YlNGDtWNPvlIW2AuFy6oZfNoZc0FPMriu6KVFtHsdLKKtyQ3WuouTsMXy+lEoq5di/dZw+OQaMGhQJTbKGtNBV84I17eFV6/0/vxlsC7moYO4n450voVere36Q/IJyf5p9q9zCZFfm20fOyzcEtjTUUckGqwKlCw8uHFx956RX5dfnxw2WR3wTALnHzW4wEv/XqjrNeE5veOITSVZa2r112Cwa+AuxdhRp5XJNNJtal9TjWHx6LZt34PiEh8JlPsJCvwWd+653gp9N8F1XvGje+LGV7Sf2H9ugAgmLN/Liurh+W1d+qOl5vNF1RfL9R8q6K2mUt2pWiG7VjbKNyu1hfQ65FY8Oj0TUc34kU7xEQQazxdoLxnb+wqjsLoChwJ+TsK8YOK+PbIOAYCkj0IC3BISnJFWx0sfmBzk0Ns+y61OV6uJBY17VNuJ168B4Ic8uIrVyLHt2PzQvc91PcO88aXFJXV6fzSsCWF9BnMJWz1ynPYtHpDPBjj3U6zaDD/uq6RH+u1hx0OmzkmvQMA9ck3t16OjQ108XA2qXuDheAV3SXXYqIEuHldG/KqQ/EWSLKCG99GyHyc8AtBy58LWaLkcMKR0QRDxMa25fAoYkh3oYZkvZtBgSfKfJcaSCxLFIre4DHvMDeOT+1y0pY8bDKLJ/Dxnvu+J8WMrU9mRHNLQnYEHVCI9hkCIemOBUTFqeQgdy9hFHVoTgQ90hoOgmBUkDqE7+HRlmxUQIMEyc7ql7EGVgcRC5qekwKat7qobHJDNhx+LumSmqYgdMYS+VSEkiuIy3WogTIYTjXQfL0vVOgovdiAxpzll23I3qWkI8iS9xEVAby6JZU0wIbOHkMVpHQCUECUl22lLFW9U+YA85QpGkPzmHxexb00Bha7h+dzi/KCsTiBE2+diKfuvHUC1OkrVVG7IDLBj27/swLdoLu7wPSiQtmvggVHKLCg1MZe/z0fwYf8S4QxMBjYk309dGb1XP2xr/fJr1er/vzrOgrPd/zcyGI5mnveX+/L7L+wi5TKqRCBHEh6Hv4sE9nXDiRgcKCparm87I3qRG8gt6kxzb1xzb1xzb1xzb1xzb1xzb1xzb1L6F3+rFN/ZtqU/endSs+2L085TILWrLcTf8ZHuWxwA504b9nM05FVdzXXXQjvI3HMVdXeHA61enHj/gaFsAWijN4XAE6qCZXeSivD7BAQM1lZVtbz7dgQcAs3P3BVs86VgPcDFR0boOxWClqlCowRuHNjW+FX1KFO9J8jS1I8HcQ4Rk8r5rl6N1VVB624LtbklpHi0YFB8BwjVz+gcou/lO2CZja5e7MyYN/qSbTRubqyt2kAK7lePfpxhke4XI0qvQCJPkvlOCdgQ==
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Complete Login"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/login"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Complete second factor for login.

You can learn more about the login flow [here](../../docs/guides/auth/authentication#login).

### Requirements
- User authenticated using their password through [`POST /api/auth/login`](../../docs/api/login).
- At least one of [email](../../docs/guides/auth/two-factor#email) or [TOTP](../../docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.
- An `email` or `totp` 2FA code is present for an enabled 2FA method.
  Check out [email](../../docs/guides/auth/two-factor#email) and [TOTP](../../docs/guides/auth/two-factor#totp)
  to learn how to retrieve a 2FA code.
  
**Optional session data:**
- The `session` object can be included in the request body.
- Inside the `session` object, you can provide the following optional fields:
    - `browser`: The name of the browser used (e.g., "Chrome", "Firefox").
    - `os`: The operating system of the device (e.g., "Windows", "macOS", "Android").

This information helps users identify and manage authorized sessions, improving overall account security.

### Tokens
- A valid [`TwoFactorAuthenticationToken`](../../docs/guides/auth/tokens#two-factor-authentication-token)
  is required. This token will be set automatically as HTTP-only cookie through [`POST /api/auth/login`](../../docs/api/login)
  or can be retrieved from the response and set as header manually if [header authentication](../../docs/guides/auth/authentication#header-authentication) 
  is enabled.
- If this action is successful, [`AccessToken`](../../docs/guides/auth/tokens#access-token) and 
  [`RefreshToken`](../../docs/guides/auth/tokens#refresh-token) 
  will automatically be set as HTTP-only cookies.
  If [header authentication](../../docs/guides/auth/authentication#header-authentication) is enabled,
  [`AccessToken`](../../docs/guides/auth/tokens#access-token) and 
  [`RefreshToken`](../../docs/guides/auth/tokens#refresh-token)
  will be returned in the response body and can be used as 
  bearer tokens in the authorization header for upcoming requests.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"totp":{"type":"integer","format":"int32"},"session":{"type":"object","properties":{"browser":{"type":"string","description":"The name of the browser used.","example":"Chrome"},"os":{"type":"string","description":"The operating system of the device.","example":"WIndows"}},"title":"SessionInfoRequest"}},"title":"CompleteLoginRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Information about the user and the tokens if header authentication is enabled.","content":{"*/*":{"schema":{"type":"object","properties":{"user":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"type":"string","enum":["USER","ADMIN","GUEST"]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","email"]},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","email"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"canEdit":{"type":"boolean"},"canDelete":{"type":"boolean"}},"required":["canDelete","canEdit","ownerId","visibility"],"title":"ContentAccessDetailsResponse"},"renditions":{"type":"object","additionalProperties":{"type":"object","properties":{"key":{"type":"string"},"size":{"type":"integer","format":"int64"},"contentType":{"type":"string"},"url":{"type":"string"},"width":{"type":"integer","format":"int32"},"height":{"type":"integer","format":"int32"}},"required":["contentType","key","size","url"],"title":"FileRenditionResponse"}}},"required":["access","createdAt","id","key","renditions","updatedAt"],"title":"FileMetadataResponse"},"createdAt":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["createdAt","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorMethods"],"title":"UserResponse"},"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"twoFactorRequired":{"type":"boolean"},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","email"]}},"preferredTwoFactorMethod":{"type":"string","enum":["totp","email"]},"twoFactorAuthenticationToken":{"type":"string"},"location":{"type":"object","properties":{"ipAddress":{"type":"string"},"city":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"City"},"country":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"is_in_european_union":{"type":"boolean"},"iso_code":{"type":"string"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Country"},"continent":{"type":"object","properties":{"code":{"type":"string"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Continent"},"location":{"type":"object","properties":{"accuracy_radius":{"type":"integer","format":"int32"},"average_income":{"type":"integer","format":"int32"},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"metro_code":{"type":"integer","format":"int32","deprecated":true},"population_density":{"type":"integer","format":"int32"},"time_zone":{"type":"string"}},"title":"Location"}},"required":["city","continent","country","ipAddress","location"],"title":"GeolocationResponse"}},"required":["twoFactorRequired","user"],"title":"LoginResponse"}}}},"304":{"description":"User is already authenticated.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"400":{"description":"No 2FA code for an enabled 2FA method was provided or 2FA is disabled.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"Invalid or expired `TwoFactorAuthenticationToken`.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      