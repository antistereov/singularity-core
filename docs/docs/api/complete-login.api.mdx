---
id: complete-login
title: "Complete Login"
description: "Complete second factor for login."
sidebar_label: "Complete Login"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Complete Login"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/login"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Complete second factor for login.

You can learn more about the login flow [here](../../docs/guides/auth/authentication#login).

### Requirements
- User authenticated using their password through [`POST /api/auth/login`](../../docs/api/login).
- At least one of [email](../../docs/guides/auth/two-factor#email) or [TOTP](../../docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.
- An `email` or `totp` 2FA code is present for an enabled 2FA method.
  Check out [email](../../docs/guides/auth/two-factor#email) and [TOTP](../../docs/guides/auth/two-factor#totp)
  to learn how to retrieve a 2FA code.
  
**Optional session data:**
- The `session` object can be included in the request body.
- Inside the `session` object, you can provide the following optional fields:
    - `browser`: The name of the browser used (e.g., "Chrome", "Firefox").
    - `os`: The operating system of the device (e.g., "Windows", "macOS", "Android").

This information helps users identify and manage authorized sessions, improving overall account security.

### Tokens
- A valid [`TwoFactorAuthenticationToken`](../../docs/guides/auth/tokens#two-factor-authentication-token)
  is required. This token will be set automatically as HTTP-only cookie through [`POST /api/auth/login`](../../docs/api/login)
  or can be retrieved from the response and set as header manually if [header authentication](../../docs/guides/auth/authentication#header-authentication) 
  is enabled.
- If this action is successful, [`AccessToken`](../../docs/guides/auth/tokens#access-token) and 
  [`RefreshToken`](../../docs/guides/auth/tokens#refresh-token) 
  will automatically be set as HTTP-only cookies.
  If [header authentication](../../docs/guides/auth/authentication#header-authentication) is enabled,
  [`AccessToken`](../../docs/guides/auth/tokens#access-token) and 
  [`RefreshToken`](../../docs/guides/auth/tokens#refresh-token)
  will be returned in the response body and can be used as 
  bearer tokens in the authorization header for upcoming requests.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"totp":{"type":"integer","format":"int32"},"session":{"type":"object","properties":{"browser":{"type":"string","description":"The name of the browser used.","example":"Chrome"},"os":{"type":"string","description":"The operating system of the device.","example":"WIndows"}},"title":"SessionInfoRequest"}},"title":"CompleteLoginRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Information about the user and the tokens if header authentication is enabled.","content":{"*/*":{"schema":{"type":"object","properties":{"user":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"type":"string","enum":["USER","ADMIN","GUEST"]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","mail"]},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"canEdit":{"type":"boolean"},"canDelete":{"type":"boolean"}},"required":["canDelete","canEdit","ownerId","visibility"],"title":"ContentAccessDetailsResponse"},"renditions":{"type":"object","additionalProperties":{"type":"object","properties":{"key":{"type":"string"},"size":{"type":"integer","format":"int64"},"contentType":{"type":"string"},"url":{"type":"string"},"width":{"type":"integer","format":"int32"},"height":{"type":"integer","format":"int32"}},"required":["contentType","key","size","url"],"title":"FileRenditionResponse"}}},"required":["access","createdAt","id","key","renditions","updatedAt"],"title":"FileMetadataResponse"},"createdAt":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["createdAt","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorMethods"],"title":"UserResponse"},"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"twoFactorRequired":{"type":"boolean"},"allowedTwoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"preferredTwoFactorMethod":{"type":"string","enum":["totp","mail"]},"twoFactorAuthenticationToken":{"type":"string"},"location":{"type":"object","properties":{"ipAddress":{"type":"string"},"city":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"City"},"country":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"is_in_european_union":{"type":"boolean"},"iso_code":{"type":"string"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Country"},"continent":{"type":"object","properties":{"code":{"type":"string"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Continent"},"location":{"type":"object","properties":{"accuracy_radius":{"type":"integer","format":"int32"},"average_income":{"type":"integer","format":"int32"},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"metro_code":{"type":"integer","format":"int32","deprecated":true},"population_density":{"type":"integer","format":"int32"},"time_zone":{"type":"string"}},"title":"Location"}},"required":["city","continent","country","ipAddress","location"],"title":"GeolocationResponse"}},"required":["twoFactorRequired","user"],"title":"LoginResponse"}}}},"304":{"description":"User is already authenticated.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"400":{"description":"No 2FA code for an enabled 2FA method was provided or 2FA is disabled.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"Invalid or expired `TwoFactorAuthenticationToken`.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      