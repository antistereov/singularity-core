---
id: complete-login
title: "Complete Login"
description: "Complete second factor for login."
sidebar_label: "Complete Login"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Complete Login"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/login"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Complete second factor for login.

You can learn more about the login flow [here](../../docs/guides/auth/authentication#login).

### Requirements
- User authenticated using their password through [`POST /api/auth/login`](../../docs/api/login).
- At least one of [email](../../docs/guides/auth/two-factor#email) or [TOTP](../../docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.
- An `email` or `totp` 2FA code is present for an enabled 2FA method.
  Check out [email](../../docs/guides/auth/two-factor#email) and [TOTP](../../docs/guides/auth/two-factor#totp)
  to learn how to retrieve a 2FA code.
  
**Optional session data:**
- The `session` object can be included in the request body.
- Inside the `session` object, you can provide the following optional fields:
    - `browser`: The name of the browser used (e.g., "Chrome", "Firefox").
    - `os`: The operating system of the device (e.g., "Windows", "macOS", "Android").

This information helps users identify and manage authorized sessions, improving overall account security.

### Tokens
- A valid [`TwoFactorAuthenticationToken`](../../docs/guides/auth/tokens#two-factor-authentication-token)
  is required. This token will be set automatically as HTTP-only cookie through [`POST /api/auth/login`](../../docs/api/login)
  or can be retrieved from the response and set as header manually if [header authentication](../../docs/guides/auth/authentication#header-authentication) 
  is enabled.
- If this action is successful, [`AccessToken`](../../docs/guides/auth/tokens#access-token) and 
  [`RefreshToken`](../../docs/guides/auth/tokens#refresh-token) 
  will automatically be set as HTTP-only cookies.
  If [header authentication](../../docs/guides/auth/authentication#header-authentication) is enabled,
  [`AccessToken`](../../docs/guides/auth/tokens#access-token) and 
  [`RefreshToken`](../../docs/guides/auth/tokens#refresh-token)
  will be returned in the response body and can be used as 
  bearer tokens in the authorization header for upcoming requests.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"totp":{"type":"integer","format":"int32"},"session":{"type":"object","properties":{"browser":{"type":"string","description":"The name of the browser used.","example":"Chrome"},"os":{"type":"string","description":"The operating system of the device.","example":"WIndows"}},"title":"SessionInfoRequest"}},"title":"CompleteLoginRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Information about the user and the tokens if header authentication is enabled.","content":{"*/*":{"schema":{"type":"object","properties":{"user":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"type":"string"},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","email"]},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","email"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"canEdit":{"type":"boolean"},"canDelete":{"type":"boolean"}},"required":["canDelete","canEdit","ownerId","visibility"],"title":"ContentAccessDetailsResponse"},"renditions":{"type":"object","additionalProperties":{"type":"object","properties":{"key":{"type":"string"},"size":{"type":"integer","format":"int64"},"contentType":{"type":"string"},"url":{"type":"string"},"width":{"type":"integer","format":"int32"},"height":{"type":"integer","format":"int32"}},"required":["contentType","key","size","url"],"title":"FileRenditionResponse"}},"originalUrl":{"type":"string"}},"required":["access","createdAt","id","key","renditions","updatedAt"],"title":"FileMetadataResponse"},"createdAt":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["createdAt","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorMethods"],"title":"PrincipalResponse"},"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"twoFactorRequired":{"type":"boolean"},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","email"]}},"preferredTwoFactorMethod":{"type":"string","enum":["totp","email"]},"twoFactorAuthenticationToken":{"type":"string"},"location":{"type":"object","properties":{"ipAddress":{"type":"string"},"city":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"City"},"country":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"is_in_european_union":{"type":"boolean"},"iso_code":{"type":"string"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Country"},"continent":{"type":"object","properties":{"code":{"type":"string"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Continent"},"location":{"type":"object","properties":{"accuracy_radius":{"type":"integer","format":"int32"},"average_income":{"type":"integer","format":"int32"},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"metro_code":{"type":"integer","format":"int32","deprecated":true},"population_density":{"type":"integer","format":"int32"},"time_zone":{"type":"string"}},"title":"Location"}},"required":["city","continent","country","ipAddress","location"],"title":"GeolocationResponse"}},"required":["twoFactorRequired","user"],"title":"LoginResponse"}}}},"304":{"description":"The following error codes correspond to this status:\n* **`ALREADY_AUTHENTICATED`:** Principal is already authenticated.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"400":{"description":"The following error codes correspond to this status:\n* **`NO_2FA_CODE_PROVIDED`:** Invalid request: at least one of email or totp must be provided.\n* **`NO_PASSWORD_PROVIDER`:** The user needs to set a password in to perform this action.\n* **`2FA_DISABLED`:** User needs to set up two-factor authentication to complete this action.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"The following error codes correspond to this status:\n* **`TWO_FACTOR_AUTHENTICATION_TOKEN_EXPIRED`:** Indicates that the two-factor authentication token is expired.\n* **`TWO_FACTOR_AUTHENTICATION_TOKEN_INVALID`:** Indicates that the two-factor authentication token cannot be decoded.\n* **`TWO_FACTOR_AUTHENTICATION_TOKEN_MISSING`:** Thrown when the two-factor authentication token is missing.\n* **`TWO_FACTOR_CODE_EXPIRED`:** Two-factor code has expired.\n* **`WRONG_TWO_FACTOR_CODE`:** Wrong two-factor code.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"404":{"description":"The following error codes correspond to this status:\n* **`USER_NOT_FOUND`:** User not found.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"500":{"description":"The following error codes correspond to this status:\n* **`DATABASE_FAILURE`:** Exception representing a general failure related to database operations.\n* **`INVALID_USER_DOCUMENT`:** A requested user document was stored in an invalid format.\n* **`POST_COMMIT_SIDE_EFFECT_FAILURE`:** Exception representing a failure to perform a side effect after a successful database operation.\n* **`TOTP_CODE_VALIDATION_FAILURE`:** Failed to validate TOTP code.\n* **`ACCESS_TOKEN_CACHE_FAILURE`:** Thrown when an access token could not be created due to an exception in the access token whitelist.\n* **`ACCESS_TOKEN_ENCODING_FAILURE`:** Represents an exception that occurs during the encoding process of an access token.\n* **`ACCESS_TOKEN_CREATION_FAILURE`:** Thrown when a generic exception occurred during the creation of an access token.\n* **`ACCESS_TOKEN_INVALID_PRINCIPAL_DOCUMENT_FAILURE`:** Indicates that the principal document associated with the access token is invalid.\n* **`ACCESS_TOKEN_SECRET_FAILURE`:** Represents an exception that occurs when there is a failure related to the secret required for creating an access token.\n* **`REFRESH_TOKEN_ENCODING_FAILURE`:** Represents an exception that occurs during the encoding process of a refresh token.\n* **`REFRESH_TOKEN_CREATION_FAILURE`:** Thrown when a generic exception occurred during the creation of an access token.\n* **`REFRESH_TOKEN_INVALID_PRINCIPAL_DOCUMENT_FAILURE`:** Indicates that the principal document associated with the access token is invalid.\n* **`REFRESH_TOKEN_SECRET_FAILURE`:** Represents an exception that occurs when there is a failure related to the secret required for creating a refresh token.\n* **`REFRESH_TOKEN_SESSION_UPDATE_FAILURE`:** Thrown when an exception occurs when updating the user sessions after creating a new refresh token.\n* **`COOKIE_CREATION_FAILURE`:** Thrown when an exception occurred during the creation of a cookie.\n* **`INVALID_PRINCIPAL_DOCUMENT`:** A requested principal document was stored in an invalid format.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      