---
id: complete-login
title: "Complete Login"
description: "Complete second factor for login."
sidebar_label: "Complete Login"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Complete Login"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/login"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Complete second factor for login.

You can learn more about the login flow [here](https://singularity.stereov.io/docs/guides/auth/authentication#login).

### Requirements
- User authenticated using their password through [`POST /api/auth/login`](https://singularity.stereov.io/docs/api/login).
- At least one of [email](https://singularity.stereov.io/docs/guides/auth/two-factor#email) or [TOTP](https://singularity.stereov.io/docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.
- An `email` or `totp` 2FA code is present for an enabled 2FA method.
  Check out [email](https://singularity.stereov.io/docs/guides/auth/two-factor#email) and [TOTP](https://singularity.stereov.io/docs/guides/auth/two-factor#totp)
  to learn how to retrieve a 2FA code.
  
**Optional session data:**
- The `session` object can be included in the request body.
- Inside the `session` object, you can provide the following optional fields:
    - `browser`: The name of the browser used (e.g., "Chrome", "Firefox").
    - `os`: The operating system of the device (e.g., "Windows", "macOS", "Android").

This information helps users identify and manage authorized sessions, improving overall account security.

### Tokens
- A valid [`TwoFactorAuthenticationToken`](https://singularity.stereov.io/docs/guides/auth/tokens#two-factor-authentication-token)
  is required. This token will be set automatically as HTTP-only cookie through [`POST /api/auth/login`](https://singularity.stereov.io/docs/api/login)
  or can be retrieved from the response and set as header manually if [header authentication](https://singularity.stereov.io/docs/guides/authentication#header-authentication) 
  is enabled.
- If this action is successful, [`AccessToken`](https://singularity.stereov.io/docs/guides/auth/tokens#access-token) and 
  [`RefreshToken`](https://singularity.stereov.io/docs/guides/auth/tokens#refresh-token) 
  will automatically be set as HTTP-only cookies.
  If [header authentication](https://singularity.stereov.io/docs/guides/auth/authentication#header-authentication) is enabled,
  [`AccessToken`](https://singularity.stereov.io/docs/guides/auth/tokens#access-token) and 
  [`RefreshToken`](https://singularity.stereov.io/docs/guides/auth/tokens#refresh-token)
  will be returned in the response body and can be used as 
  bearer tokens in the authorization header for upcoming requests.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"totp":{"type":"integer","format":"int32"},"session":{"type":"object","properties":{"browser":{"type":"string","description":"The name of the browser used.","example":"Chrome"},"os":{"type":"string","description":"The operating system of the device.","example":"WIndows"}},"title":"SessionInfoRequest"}},"title":"CompleteLoginRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Information about the user and the tokens if header authentication is enabled.","content":{"*/*":{"schema":{"type":"object","properties":{"user":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"type":"string","enum":["USER","ADMIN","GUEST"]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","mail"]},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"users":{"type":"object","properties":{"maintainer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["editor","isEmpty","maintainer","viewer"],"title":"ContentAccessPermissions"},"groups":{"type":"object","properties":{"maintainer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"editor":{"type":"array","items":{"type":"string"},"uniqueItems":true},"viewer":{"type":"array","items":{"type":"string"},"uniqueItems":true},"isEmpty":{"type":"boolean"}},"required":["editor","isEmpty","maintainer","viewer"],"title":"ContentAccessPermissions"},"invitations":{"type":"array","items":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"uniqueItems":true}},"required":["groups","invitations","ownerId","users","visibility"],"title":"ContentAccessDetails"},"renditions":{"type":"object","additionalProperties":{"type":"object","properties":{"key":{"type":"string"},"size":{"type":"integer","format":"int64"},"contentType":{"type":"string"},"url":{"type":"string"},"width":{"type":"integer","format":"int32"},"height":{"type":"integer","format":"int32"}},"required":["contentType","key","size","url"],"title":"FileRenditionResponse"}},"trusted":{"type":"boolean"},"tags":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["access","createdAt","id","key","renditions","tags","trusted","updatedAt"],"title":"FileMetadataResponse"},"created":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["created","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorMethods"],"title":"UserResponse"},"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"twoFactorRequired":{"type":"boolean"},"allowedTwoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"preferredTwoFactorMethod":{"type":"string","enum":["totp","mail"]},"twoFactorAuthenticationToken":{"type":"string"},"location":{"type":"object","properties":{"ipAddress":{"type":"string"},"city":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"City"},"country":{"type":"object","properties":{"confidence":{"type":"integer","format":"int32"},"geoname_id":{"type":"integer","format":"int64"},"is_in_european_union":{"type":"boolean"},"iso_code":{"type":"string"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Country"},"continent":{"type":"object","properties":{"code":{"type":"string"},"geoname_id":{"type":"integer","format":"int64"},"names":{"type":"object","additionalProperties":{"type":"string"}}},"title":"Continent"},"location":{"type":"object","properties":{"accuracy_radius":{"type":"integer","format":"int32"},"average_income":{"type":"integer","format":"int32"},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"metro_code":{"type":"integer","format":"int32","deprecated":true},"population_density":{"type":"integer","format":"int32"},"time_zone":{"type":"string"}},"title":"Location"}},"required":["city","continent","country","ipAddress","location"],"title":"GeolocationResponse"}},"required":["twoFactorRequired","user"],"title":"LoginResponse"}}}},"304":{"description":"User is already authenticated.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"400":{"description":"No 2FA code for an enabled 2FA method was provided or 2FA is disabled.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"Invalid or expired `TwoFactorAuthenticationToken`.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      