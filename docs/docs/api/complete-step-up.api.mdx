---
id: complete-step-up
title: "Complete Step-Up"
description: "Perform second factor for step-up."
sidebar_label: "Complete Step-Up"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Complete Step-Up"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/step-up"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Perform second factor for step-up.

You can learn more about the step-up flow [here](https://singularity.stereov.io/docs/guides/auth/authentication#step-up).

### Requirements
- User authenticated using their password through [`POST /api/auth/step-up`](https://singularity.stereov.io/docs/api/step-up).
- At least one of [email](https://singularity.stereov.io/docs/guides/auth/two-factor#email) or [TOTP](https://singularity.stereov.io/docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.
- An `email` or `totp` 2FA code is present for an enabled 2FA method.
  Check out [email](https://singularity.stereov.io/docs/guides/auth/two-factor#email) and [TOTP](https://singularity.stereov.io/docs/guides/auth/two-factor#totp)
  to learn how to retrieve a 2FA code.

### Tokens
- A valid [`AccessToken`](https://singularity.stereov.io/docs/guides/auth/tokens#access-token) is required.
- A valid [`TwoFactorAuthenticationToken`](https://singularity.stereov.io/docs/guides/auth/tokens#two-factor-authentication-token)
  is required. This token should match user and session contained in the `AccessToken`.
- If 2FA is disabled and the request is successful, [`StepUpToken`](https://singularity.stereov.io/docs/guides/auth/tokens#step-up-token)
  will automatically be set as HTTP-only cookie.
  If [header authentication](https://singularity.stereov.io/docs/guides/auth/authentication#header-authentication) is enabled,
  the [`StepUpToken`](https://singularity.stereov.io/docs/guides/auth/tokens#step-up-token)
  will be returned in the response body and can be used to authorized critical requests.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"totp":{"type":"integer","format":"int32"}},"title":"CompleteStepUpRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"The token if header authentication is enabled.","content":{"*/*":{"schema":{"type":"object","properties":{"token":{"type":"string"}},"title":"StepUpResponse"}}}},"400":{"description":"No 2FA code for an enabled 2FA method was provided or 2FA is disabled.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"Invalid or expired `TwoFactorAuthenticationToken` or invalid or expired 2FA code.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      