---
id: complete-step-up
title: "Complete Step-Up"
description: "Perform second factor for step-up."
sidebar_label: "Complete Step-Up"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Complete Step-Up"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/step-up"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Perform second factor for step-up.

You can learn more about the step-up flow [here](../../docs/guides/auth/authentication#step-up).

### Requirements
- User authenticated using their password through [`POST /api/auth/step-up`](../../docs/api/step-up).
- At least one of [email](../../docs/guides/auth/two-factor#email) or [TOTP](../../docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.
- An `email` or `totp` 2FA code is present for an enabled 2FA method.
  Check out [email](../../docs/guides/auth/two-factor#email) and [TOTP](../../docs/guides/auth/two-factor#totp)
  to learn how to retrieve a 2FA code.

### Tokens
- A valid [`AccessToken`](../../docs/guides/auth/tokens#access-token) is required.
- A valid [`TwoFactorAuthenticationToken`](../../docs/guides/auth/tokens#two-factor-authentication-token)
  is required. This token should match user and session contained in the `AccessToken`.
- If 2FA is disabled and the request is successful, [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  will automatically be set as HTTP-only cookie.
  If [header authentication](../../docs/guides/auth/authentication#header-authentication) is enabled,
  the [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  will be returned in the response body and can be used to authorized critical requests.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"totp":{"type":"integer","format":"int32"}},"title":"CompleteStepUpRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"The token if header authentication is enabled.","content":{"*/*":{"schema":{"type":"object","properties":{"stepUpToken":{"type":"string"},"twoFactorRequired":{"type":"boolean"},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","email"]}},"preferredTwoFactorMethod":{"type":"string","enum":["totp","email"]},"twoFactorAuthenticationToken":{"type":"string"}},"required":["twoFactorRequired"],"title":"StepUpResponse"}}}},"400":{"description":"No 2FA code for an enabled 2FA method was provided or 2FA is disabled.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"Invalid or expired `TwoFactorAuthenticationToken` or invalid or expired 2FA code.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      