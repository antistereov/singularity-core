---
id: complete-step-up
title: "Complete Step-Up"
description: "Perform second factor for step-up."
sidebar_label: "Complete Step-Up"
hide_title: true
hide_table_of_contents: true
api: eJztWVtv28gV/itTGigaQZS8SR8KPxR1c9l1N7tr2Ap2C8eIR+RImjXJYWeGVlTD/73fOTMSSVnZVWIHaFG/JBZ55ly+cx/eJl7OXXJ0kUyWJn0jM2+sOG78QlVeZ9JrUyWXwyRXLrO65p9HyamyM2NL4VRmqlzMwik8Es6rOm3q0fvqffVP04hMVqJQ0laiNFYJOTWNF2C+JhSzwizFxUJZdfmnhfe1OxqPna7mTSGt9qsR6KwyNyNtxrnJ3HjeaOgyltCQ/2nVPIgsn7Hwg4MDcab+1WirStC491Uq3jllReeQykVDskghbUUtnVsam+OnNc18IS6uTn86n4ixrHUQGCVc7acqHevolIpjT1g4L0ylhJmJC1VKXXy+3R6eCpgfMIdnAshfTH6anD6Ilze+fiakE8/fHItS+YXJnXAL0xS5mCqhKjktVB4sqcQVi74i0Vd08oqPZSZXQjtRW+WAMscEQiCe7XAGGyFeLlR2LSgkHg8KiYB8JCxIRW9i/C4Qp/hhlbda3SCUN/Zu4m1irlXFkXYsbmShocjVcZYp5/jNnmHT04g5HkhmkvKvZwSvDZEdnbERhhQOGdxP4AdKb2FJ+xkXFSKYujqJyQI/+d06fErpswWSjfIP/nGwBueBXuWlrhAYuuKq0IOLjTuZMc5gmGsXgog4EDEJVMgmvHMNn5s1xRAwnCPp3tUPtDpmbsfGpS4KKh8G1gCBolhRWjjlKWe+m0xOU1PhWWbMtVYc31AepU3m/bIDyx9c6wLXLX9waMRUG3LwAqWvC8eU3OAb2/EhMr82lVNiavIVO4uaAAjh/pxSiNgaq/+NX+gpDOXal26UDBP1EepUsngFVZKj26SxBXrOXhW3n8XJ3TAxtbIMzkkOJpkp60J5FSCBrCj371CVRFFAAk/6U9Z1EXEd/+qo7d0mLlugytBfflUr8DPTX1Xmwae2JMhrxRpzKeqQOdSMak7qUF3pvNAQN1cWDKifSh8evXie3BGt9gURvewpfRY0BsVdUJ9yLjnytlH8IIDPajw/PKT/+r17AheF3NQzsTM4O1FE7uhgMhgPPgcG1wbebjDW5epsY8aGamoM6m7VI/sh9KQOlbRWriBXe1W6+zIQS1VT0nDDuA8T9sslIYcGNVMWMid97vsz6Si2o9zuMLjnr4sd1l+2Pl/7OniTnI3Tf97lzx9N23g/2W3FUlJPNjfI65xa9lZNfZifvS4RkbKsd4G3CewcA1dKpORTkPvG7ZUJwN9aJPOuCIJcJ+dq57ta+sXveyHw3ig07BjTccdrorrnjW/ue+OkCr0YEKuPNQkRv92ViVLfP7SZLZ4c85mOIRtU1lB/ABvU8Xai+I6rHZ5e/nbutnR3wx6Dl9zaf59BS3d3SViEwpLUxrGP2P6kXSuez+R6USCDlb1R1rHy+7S+ZHs7e6VKIwKXhAxomYBHYdBuF1Dk6C+HKCfbZ9/Sa5FjwC1MTYvThtFli+s5hV+MsD1QaKt1rb9Xq3symThsj5sxbrslLbVfCG6rPFGsV7UhcidnGmxxsaZt5tAd++cXLpp7DsKUrJUsyVSQfgikH/qkH5iUWlbF8whDhJjdEaYb3Ejde6iFSTm2cgKvcfc6+Ug8Oga9VYQM5lrEHRsiuE6EP96sq8U/fp5sGbhvYOxl4te3MLo0PP+U/zqzzhfEPQ6Lpt4OeqwYZkmRHUTTlQGnIM/YprF4+Pjm9wf9jv304kNTfwqAfQrq/2Ml+CVtL9bSPjbppAtlmMUTboMzOHjxGcXgLJyIqcLXFGE3rtRyHT1B9cfHImr7BSWhkzNfECH/CznzS0qDfPqu3sfV+9aN/y5nR0vji93VAYbSCn3WLtuvP0paajvLcjuYhh358I6YzEyYY+NW1Corjk9P7iHzsyqw4dN+yzcRgw794A+Crun4agrGNTTbhIjJDI1b8epC5ivYlqLRYIvKa4NR1+EgL1a9QBuGZlTKCmMuMRuGq44wq3eeg7H0gtXCzpmCYKbnDc34XMneVz0t+S5xMHijMPQCT4GjUnxbyCpTg8ERvUzFYNAvI+KP4Wb7h43Mo8FAnFRZ0QAegWRj3YM82w0eN6RSORR0nRNKKqDQs42JZJHFHp5OJd3dxNgiG/GUb7iCPq+kl9DiZTS+r8jrDY4z3nUQZCiGlKKskNyFGbF2K8RjGeBzTV0bCxZlU3idAo95A9r10aFYw0rbrPByPgf/oP+00YVPdcU8tywQx+QTphBXx1ibskJdiaxAT6H+IQtnNltzx9z4+YOcAqvP41RMttLlCgKTDgeu0cQZIg61qCJueZNx8adg0xXUCfhr9hfBYrGPiUKXmkEK96WZVWuAAoZz22mH8VISLrpWK3gsRPZoE/BRJdKjqfJwkJxBOgaRZtqggExlhqjIeebXQGooSp1Z0/7EGSRDUxQpNrHsWnQuyRyL++tg8KPxirA4p5Bvkyg2Y9pwcUT71mWsDlK2840hbr2IE0r/WGLOQ3nCu621qLsKratJPP63zksUFEhWtCi2TL89fXvzQryNz7dZL5fL0bxqRsbOx/EsymJdpC9GhyNVjRa+LIgvVZBQgr7Bi0PecrFjwWEdUet7PBF7wnb56lw/Pn1he/rC9vSF7ekL29MXtqcvbF/hC1vcL7z66Md1gfighsWd7zbeTl7Q8gFK4oT/ns9kEvY1uqO8HCZ0g0hUt7c0Gr6zxd0dPYYIuwr3ozcwnHAK16jrlYcuNTGjcDfkXpdOSBciL5qw82x9dqMbzHCCIrf2HVq6De9dsFIzoW0zfs0rUTpoNZFL+tKHf4+ShL4I8rhCBPzsNlmPk3gfRNLCwpZ3vkf1V1k2ZL2mVauOUkCEKTgagMowah8Wo7tLMP8PQJWypQ==
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Complete Step-Up"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/step-up"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Perform second factor for step-up.

You can learn more about the step-up flow [here](../../docs/guides/auth/authentication#step-up).

### Requirements
- User authenticated using their password through [`POST /api/auth/step-up`](../../docs/api/step-up).
- At least one of [email](../../docs/guides/auth/two-factor#email) or [TOTP](../../docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.
- An `email` or `totp` 2FA code is present for an enabled 2FA method.
  Check out [email](../../docs/guides/auth/two-factor#email) and [TOTP](../../docs/guides/auth/two-factor#totp)
  to learn how to retrieve a 2FA code.

### Tokens
- A valid [`AccessToken`](../../docs/guides/auth/tokens#access-token) is required.
- A valid [`TwoFactorAuthenticationToken`](../../docs/guides/auth/tokens#two-factor-authentication-token)
  is required. This token should match user and session contained in the `AccessToken`.
- If 2FA is disabled and the request is successful, [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  will automatically be set as HTTP-only cookie.
  If [header authentication](../../docs/guides/auth/authentication#header-authentication) is enabled,
  the [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  will be returned in the response body and can be used to authorized critical requests.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"totp":{"type":"integer","format":"int32"}},"title":"CompleteStepUpRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"The token if header authentication is enabled.","content":{"*/*":{"schema":{"type":"object","properties":{"stepUpToken":{"type":"string"},"twoFactorRequired":{"type":"boolean"},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"preferredTwoFactorMethod":{"type":"string","enum":["totp","mail"]},"twoFactorAuthenticationToken":{"type":"string"}},"required":["twoFactorRequired"],"title":"StepUpResponse"}}}},"400":{"description":"No 2FA code for an enabled 2FA method was provided or 2FA is disabled.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"Invalid or expired `TwoFactorAuthenticationToken` or invalid or expired 2FA code.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      