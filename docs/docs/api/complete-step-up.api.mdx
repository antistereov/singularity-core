---
id: complete-step-up
title: "Complete Step-Up"
description: "Perform second factor for step-up."
sidebar_label: "Complete Step-Up"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Complete Step-Up"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/step-up"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Perform second factor for step-up.

You can learn more about the step-up flow [here](../../docs/guides/auth/authentication#step-up).

### Requirements
- User authenticated using their password through [`POST /api/auth/step-up`](../../docs/api/step-up).
- At least one of [email](../../docs/guides/auth/two-factor#email) or [TOTP](../../docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.
- An `email` or `totp` 2FA code is present for an enabled 2FA method.
  Check out [email](../../docs/guides/auth/two-factor#email) and [TOTP](../../docs/guides/auth/two-factor#totp)
  to learn how to retrieve a 2FA code.

### Tokens
- A valid [`AccessToken`](../../docs/guides/auth/tokens#access-token) is required.
- A valid [`TwoFactorAuthenticationToken`](../../docs/guides/auth/tokens#two-factor-authentication-token)
  is required. This token should match user and session contained in the `AccessToken`.
- If 2FA is disabled and the request is successful, [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  will automatically be set as HTTP-only cookie.
  If [header authentication](../../docs/guides/auth/authentication#header-authentication) is enabled,
  the [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  will be returned in the response body and can be used to authorized critical requests.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"totp":{"type":"integer","format":"int32"}},"title":"CompleteStepUpRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"The token if header authentication is enabled.","content":{"*/*":{"schema":{"type":"object","properties":{"stepUpToken":{"type":"string"},"twoFactorRequired":{"type":"boolean"},"allowedTwoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","mail"]}},"preferredTwoFactorMethod":{"type":"string","enum":["totp","mail"]},"twoFactorAuthenticationToken":{"type":"string"}},"required":["twoFactorRequired"],"title":"StepUpResponse"}}}},"400":{"description":"No 2FA code for an enabled 2FA method was provided or 2FA is disabled.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"Invalid or expired `TwoFactorAuthenticationToken` or invalid or expired 2FA code.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      