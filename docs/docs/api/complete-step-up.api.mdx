---
id: complete-step-up
title: "Complete Step-Up"
description: "Perform second factor for step-up."
sidebar_label: "Complete Step-Up"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Complete Step-Up"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/step-up"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Perform second factor for step-up.

You can learn more about the step-up flow [here](https://singularity.stereov.io/docs/guides/auth/authentication#step-up).

**Requirements:**
- User authenticated using their password through [`POST /api/auth/step-up`](https://singularity.stereov.io/docs/api/step-up).
- At least one of [email](https://singularity.stereov.io/docs/guides/auth/two-factor#email) or [TOTP](https://singularity.stereov.io/docs/guides/auth/two-factor#totp) as 2FA methods should be enabled.
- An `email` or `totp` 2FA code is present for an enabled 2FA method.
  Check out [email](https://singularity.stereov.io/docs/guides/auth/two-factor#email) and [TOTP](https://singularity.stereov.io/docs/guides/auth/two-factor#totp)
  to learn how to retrieve a 2FA code.

**Tokens:**
- A valid [`AccessToken`](https://singularity.stereov.io/docs/guides/auth/tokens#access-token) is required.
- A valid [`TwoFactorAuthenticationToken`](https://singularity.stereov.io/docs/guides/auth/tokens#two-factor-authentication-token)
  is required. This token should match user and session contained in the `AccessToken`.
- If 2FA is disabled and the request is successful, [`StepUpToken`](https://singularity.stereov.io/docs/guides/auth/tokens#step-up-token)
  will automatically be set as HTTP-only cookie.
  If [header authentication](https://singularity.stereov.io/docs/guides/auth/authentication#header-authentication) is enabled,
  the [`StepUpToken`](https://singularity.stereov.io/docs/guides/auth/tokens#step-up-token)
  will be returned in the response body and can be used to authorized critical requests.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string"},"totp":{"type":"integer","format":"int32"}},"title":"CompleteStepUpRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"The token if header authentication is enabled.","content":{"*/*":{"schema":{"type":"object","properties":{"token":{"type":"string"}},"title":"StepUpResponse"}}}},"400":{"description":"No 2FA code for an enabled 2FA method was provided or 2FA is disabled.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"Invalid or expired `TwoFactorAuthenticationToken` or invalid or expired 2FA code.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      