---
id: enable-totp-as-two-factor-method
title: "Enable TOTP as 2FA Method"
description: "Set up TOTP for a user using a TOTPSetupToken and the TOTP code."
sidebar_label: "Enable TOTP as 2FA Method"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Enable TOTP as 2FA Method"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/totp/setup"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Set up TOTP for a user using a TOTPSetupToken and the TOTP code.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string"},"code":{"type":"integer","format":"int32"}},"required":["code","token"],"title":"TwoFactorVerifySetupRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success.","content":{"*/*":{"schema":{"type":"object","properties":{"secret":{"type":"string"},"optAuthUrl":{"type":"string"},"recoveryCodes":{"type":"array","items":{"type":"string"}},"token":{"type":"string"}},"required":["optAuthUrl","recoveryCodes","secret","token"],"title":"TwoFactorSetupResponse"}}}},"401":{"description":"Wrong code or not authorized.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"403":{"description":"The user already enabled TOTP.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      