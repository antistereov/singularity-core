---
id: enable-totp-as-two-factor-method
title: "Enable TOTP as 2FA Method"
description: "Set up TOTP for a user using a TOTPSetupToken and the TOTP code."
sidebar_label: "Enable TOTP as 2FA Method"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Enable TOTP as 2FA Method"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/totp/setup"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Set up TOTP for a user using a TOTPSetupToken and the TOTP code.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string"},"code":{"type":"integer","format":"int32"}},"required":["code","token"],"title":"TwoFactorVerifySetupRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success.","content":{"*/*":{"schema":{"type":"object","properties":{"secret":{"type":"string"},"totpAuthUrl":{"type":"string"},"recoveryCodes":{"type":"array","items":{"type":"string"}},"token":{"type":"string"}},"required":["recoveryCodes","secret","token","totpAuthUrl"],"title":"TwoFactorSetupResponse"}}}},"401":{"description":"AccessToken or StepUpToken is invalid.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"403":{"description":"The user did not configure authentication using password.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"409":{"description":"The user already enabled TOTP.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      