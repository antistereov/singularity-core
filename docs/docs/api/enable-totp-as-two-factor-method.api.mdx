---
id: enable-totp-as-two-factor-method
title: "Enable TOTP as 2FA Method"
description: "Set up TOTP for a user using a TOTPSetupToken and the TOTP code."
sidebar_label: "Enable TOTP as 2FA Method"
hide_title: true
hide_table_of_contents: true
api: eJztWE1z2zYQ/SsoO9ODhpQcu4dWp7qJnaZNGk8kN5lJPA5MQhJqkGABULLGo//etwAkkZKS2m2nveTiD3KxePt28XbB+8TxqU2G75PxQmfnPHfasNPGzUTlZM6d1FVylSaFsLmRtf93mIyEY03Nxq/HF2wCe84aKwx+yGqKf+g5TJp6rG9FxXhVMPgL5rkuRD9JE3HnhKm4eqZz7H6fNEbB8cy52g4HA3LUKG6kW/YtDIWe96UeFDAeTBsJNAMOjAMHzBOP+WtLGyarNNG1MB73iwIeRcVvlBhrV59aRBgCfCXcTBdAYcQfjbDuR10sCUSuK4e46U9e1yrGP/jdUtT3ic1nouT0l1vWAs71ze8id/BTG9rVSeFjcRR2y8w6g3gIG0XfeiGx3VQYOACLJXfh0clxsloFbNKIgnLj16XRMdLhpFPkYBPRb8LIydKT/ibEBB8dJ840wj+wta5sAHp8dES/dpLb5LmwlpLU4qM36D2GAityI9xBDhzlAsm7pIwfeG9ErufCLJ8iZtuy4MbwJTaSTpT2wMpV+knid9js7pCuwa7XdyEeYjvyHJgkorHBt0dP9rk89VSGY4BzMnKivoynQlomqzlXsvhnTDtZItu8rPfjbpVVwZ3IyJQYhrlr7IPqEAfVGG0OJgr7Wj4VB9/V3M3+OhHB9wZQ2gqmRfsZWe2xfbLP9hgi44WokAWrtIPYVBM5bYxgvKNoUalqbu1Cmy8J+FsJ+P4zCeDKCF4sWVDfwkv/F5Yfy/LKS1NDXRBu0JO2avIT6EUkw/dX5HajKtvHq7Rj/1TrWyn27LePV1cUqW+Lw6TW1mfAR5cMeC1Duz2e8AFp4yA0W4JnIKTWo3tIB092J4lnotQseEkI8tYJfCidczUDluF3R+hUu2tf0mtWiLlQui5RVhtHV1viRlRfsYTW8t0dbzpEbLtNLX8Ry709g3bTzGNDm5w0aldcFtLNGIpaKj/6rFUmhd4X3gbSc3x+Sh1gXSV0Nipe0sZAeR1Gmuuu3+t1d5IEJA+AUSIHqmITBRG5F0NoSsxtQglHtrMZAfJHk7zcCG78sQl/nK8Pz89vxzsAHkrjQyFETsIOnyLgQD0/Io1YTLPsTg65Unrhp9mAVE+YryiBlFndGDxs4SMn1039KYCfK7y9lP1vhfcu294Asi7SbNwObBYge5GbgI7ZI2rvTVgRM+80ixM4q8RizbV/Zx9TgQcU8D+ugHcZzXbZZf0Qqh5apY8jKyKJGx2uRQChy8yb7bXn7A5tSInWtWXbVsNt5WhFTiY6dOHQq0ZbdWenFy/2kL8VKtelIMx08+u17HtfsQ/Vh2o8QxXiPteQcAfG/VBu/QI/PWROZ9AFDBFFrdGoLRb622YnUWnQjpJXaNLkLPXFHyeN1nM45jQSAlZtRLaZDYtwbj5UHZR9AtnrnQu0bPDJsJSz54pXuej1hvQyY71e95iwb9glYXm12XPY67EXVa4a0MNQrB572M+0k2tTOpgpQLB4gOd0oduESBEZrUR2wy0Ax9xTjHjap1UBzzPuOFA8jcF3gZxteCQWaRgyOOxU4h4QP8QZubZLHJEy0GebutYGLspGOZmBj2kD2/XSdDNy09zHHJ9O4T/gv2mkcpmsvM+dCNgp5cRbsI+nGPpyJT6yXEHBSK24shoGeo6bf9EK90IYP8khKYh6FFs+xUqTKAqTFgevMcQJKg5nuSJvRZN7caNikxXgBP6lzxfRYjBNMiVL6UmiGMJNMRIUOJyalvgivRrKhBTdiiUyFiq7vyn4CIlwNFURFlIyCGPYUt80OOA3PEdVFH6gkWAqZaXMjd7+izU4DI1SGebI/Ja1PlfYWLq/aieIihFV/PYMReVn4o5WyO0lKaDBib0R67l9PbKjTOj0R4UZhXEO73ZGvvaY56vYK49f/kPrJfQEOwuacrdOn1+8nJ+wl/H5ruvFYtGfVk1fm+kgrrWDaa2yk/5RX1T9mSsV+SUBCQr0BC+O/IiO+RH5am115oMLn6O49R1x80GoI2OtD0L/xievKPZO3LlBrTiEeRXjvI+j9nvqBLAklcAvjNvxY4QftWnkxmRLAzGZ3t+TGFwatVrRYyi6WYYBfw4JoxDDPWDdhGhGR1UCQZSHbEyAyFw1oQvtfPKigTysoHmtdi1bur11rgwXr0dj6s/xS1rpW0di+IK+suHnMEno05wvUDLwz+6TtYDgfdiSWpQPf9sdd5q/D2TdOKtlCxQY8RY+B2AljehDY1tdwfmfv5hN+w==
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Enable TOTP as 2FA Method"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/totp/setup"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Set up TOTP for a user using a TOTPSetupToken and the TOTP code.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string"},"code":{"type":"integer","format":"int32"}},"required":["code","token"],"title":"TwoFactorVerifySetupRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success.","content":{"*/*":{"schema":{"type":"object","properties":{"secret":{"type":"string"},"totpAuthUrl":{"type":"string"},"recoveryCodes":{"type":"array","items":{"type":"string"}},"token":{"type":"string"}},"required":["recoveryCodes","secret","token","totpAuthUrl"],"title":"TwoFactorSetupResponse"}}}},"401":{"description":"AccessToken or StepUpToken is invalid.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"403":{"description":"The user did not configure authentication using password.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"409":{"description":"The user already enabled TOTP.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      