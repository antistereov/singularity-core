---
id: send-email-two-factor-code
title: "Send Email 2FA Code"
description: "Send an email containing a 2FA code to the user."
sidebar_label: "Send Email 2FA Code"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Send Email 2FA Code"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/email/send"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Send an email containing a 2FA code to the user.

Learn more about email as 2FA method [here](../../docs/guides/auth/two-factor#email).

This endpoint is used to send a 2FA email code for enabling email as a 2FA method
and to resend 2FA codes when authenticating user that already enabled email as a 2FA method.

>**Note:** Each request will generate a new code and invalidate all old codes.

If email is the preferred 2FA method, an email will be sent automatically after successful authentication
with the user's password.
You can learn more about preferred 2FA methods [here](../../docs/guides/auth/two-factor#changing-the-preferred-method).

### Requirements
- The user can authenticate using password. 2FA will not work with OAuth2. 
  The OAuth2 provider will validate the second factor if the user enabled it for the provider.
  
### Locale

A locale can be specified for this request. 
The email will be sent in the specified locale.
You can learn more about locale in emails [here](../../docs/guides/email/templates).

If no locale is specified, the applications default locale will be used.
You can learn more about configuring the default locale [here](../../docs/guides/configuration).

### Tokens

There are two options: 
1. If email as a 2FA method is disabled, you can request an email with a token to enable it.
   In this case you need a valid [`AccessToken`](../../docs/guides/auth/tokens#access-token).
   If email is already enabled, this request will return `400 - BAD REQUEST`.
2. If email as 2FA method is already enabled, you can request a 2FA email code with a valid
   [`TwoFactorAuthenticationToken`](../../docs/guides/auth/tokens#two-factor-authentication-token).
   
>**Note:** After each email, a cooldown will be started.
>When the cooldown is active, no new email can be sent.
>You can request the remaining cooldown throw the endpoint 
>[`GET /api/auth/2fa/email/cooldown`](../../docs/api/get-remaining-email-two-factor-cooldown).
>The cooldown can be configured [here](../../docs/guides/email/configuration).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"name":"locale","in":"query","required":false,"schema":{"type":"string"}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={undefined}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success.","content":{"*/*":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"],"title":"SuccessResponse"}}}},"400":{"description":"The following error codes correspond to this status:\n* **`NO_PASSWORD_PROVIDER`:** The user needs to set a password in to perform this action.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_EXPIRED`:** Indicates that the access token is expired.\n* **`ACCESS_TOKEN_INVALID`:** Indicates that the access token cannot be decoded.\n* **`TWO_FACTOR_AUTHENTICATION_TOKEN_EXPIRED`:** Indicates that the two-factor authentication token is expired.\n* **`TWO_FACTOR_AUTHENTICATION_TOKEN_INVALID`:** Indicates that the two-factor authentication token cannot be decoded.\n* **`TWO_FACTOR_AUTHENTICATION_TOKEN_MISSING`:** Thrown when the two-factor authentication token is missing.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"404":{"description":"The following error codes correspond to this status:\n* **`USER_NOT_FOUND`:** User not found.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"429":{"description":"The following error codes correspond to this status:\n* **`EMAIL_COOLDOWN_ACTIVE`:** Failed to send email because cooldown is active.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"500":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_ALLOWLIST_READING_FAILURE`:** Represents an exception indicating a failure when reading the allowlist for an access token cache.\n* **`DATABASE_FAILURE`:** Exception representing a general failure related to database operations.\n* **`DATABASE_ENCRYPTION_FAILURE`:** Exception representing a general failure related to database encryption operations.\n* **`EMAIL_COOLDOWN_CACHE_FAILURE`:** Thrown when an exception occurs when setting or getting cooldown.\n* **`EMAIL_AUTHENTICATION_FAILURE`:** Thrown when there is a failure related to email authentication.\n* **`INVALID_USER_DOCUMENT`:** A requested user document was stored in an invalid format.\n* **`POST_COMMIT_SIDE_EFFECT_FAILURE`:** Exception representing a failure to perform a side effect after a successful database operation.\n* **`EMAIL_SEND_FAILURE`:** Represents an exception that occurs when an email cannot be sent.\n* **`EMAIL_TEMPLATE_FAILURE`:** Thrown when there is a failure related to email template creation.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"503":{"description":"The following error codes correspond to this status:\n* **`EMAIL_DISABLED`:** Thrown when email functionality is disabled in the application.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      