---
id: send-email-two-factor-code
title: "Send Email 2FA Code"
description: "Send an email containing a 2FA code to the user."
sidebar_label: "Send Email 2FA Code"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Send Email 2FA Code"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/email/send"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Send an email containing a 2FA code to the user.

Learn more about email as 2FA method [here](https://singularity.stereov.io/docs/guides/auth/two-factor#email).

This endpoint is used to send a 2FA email code for enabling email as a 2FA method
and to resend 2FA codes when authenticating user that already enabled email as a 2FA method.

>**Note:** Each request will generate a new code and invalidate all old codes.

If email is the preferred 2FA method, an email will be sent automatically after successful authentication
with the user's password.
You can learn more about preferred 2FA methods [here](https://singularity.stereov.io/docs/guides/auth/two-factor#changing-the-preferred-method).

### Requirements
- The user can authenticate using password. 2FA will not work with OAuth2. 
  The OAuth2 provider will validate the second factor if the user enabled it for the provider.
  
### Locale

A locale can be specified for this request. 
The email will be sent in the specified locale.
You can learn more about locale in emails [here](https://singularity.stereov.io/docs/guides/email/templates).

If no locale is specified, the applications default locale will be used.
You can learn more about configuring the default locale [here](https://singularity.stereov.io/docs/guides/configuration).

### Tokens

There are two options: 
1. If email as a 2FA method is disabled, you can request an email with a token to enable it.
   In this case you need a valid [`AccessToken`](https://singularity.stereov.io/docs/guides/auth/tokens#access-token).
   If email is already enabled, this request will return `400 - BAD REQUEST`.
2. If email as 2FA method is already enabled, you can request a 2FA email code with a valid
   [`TwoFactorAuthenticationToken`](https://singularity.stereov.io/docs/guides/auth/tokens#two-factor-authentication-token).
   
>**Note:** After each email, a cooldown will be started.
>When the cooldown is active, no new email can be sent.
>You can request the remaining cooldown throw the endpoint 
>[`GET /api/auth/2fa/email/cooldown`](https://singularity.stereov.io/docs/api/get-remaining-email-two-factor-cooldown).
>The cooldown can be configured [here](https://singularity.stereov.io/docs/guides/email/configuration).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"name":"locale","in":"query","required":false,"schema":{"type":"string"}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={undefined}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success.","content":{"*/*":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"],"title":"SuccessResponse"}}}},"400":{"description":"2FA cannot be sent for users who didn't configure authentication using a password.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"Invalid or expired `AccessToken` or `TwoFactorAuthenticationToken`.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"429":{"description":"Cannot send email while cooldown is active.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}},"503":{"description":"Email is disabled in your application.","content":{"*/*":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      