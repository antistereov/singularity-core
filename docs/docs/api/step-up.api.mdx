---
id: step-up
title: "Step-Up"
description: "Requests [step-up authentification](../../docs/guides/auth/authentication#step-up)."
sidebar_label: "Step-Up"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Step-Up"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/step-up"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Requests [step-up authentification](../../docs/guides/auth/authentication#step-up). 
This re-authentication is required by critical endpoints.

**2FA:**

If the user enabled 2FA, the step-up will not be granted immediately. 
Instead, a [`TwoFactorAuthenticationToken`](../../docs/guides/auth/tokens#two-factor-authentication-token) 
is set as HTTP-only cookie and returned in the response body
if [header authentication](../../docs/guides/auth/authentication#header-authentication) is enabled.

You can complete the step-up through the endpoint [`POST /api/auth/2fa/step-up`](../../docs/api/complete-step-up).

**Request Body:**

When requesting a step-up for a [`GUEST`](../../docs/guides/auth/roles#guests)
there is no way to authenticate the user.
Therefore, no request body is required in this case.

If you request a step-up for a regular [`USER`](../../docs/guides/auth/roles#users),
it will result in a `400 - BAD REQUEST`.

### Locale

A locale can be specified for this request. 
This will be used for the email 2FA code if this method is enabled for the user.
You can learn more about 2FA through email [here](/docs/guides/auth/two-factor#email).

If no locale is specified, the applications default locale will be used.
You can learn more about configuring the default locale [here](../../docs/guides/configuration).

### Tokens
- Requires a valid [`AccessToken`](../../docs/guides/auth/tokens#access-token).
- If 2FA is disabled and the request is successful, [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  will automatically be set as HTTP-only cookie.
  If [header authentication](../../docs/guides/auth/authentication#header-authentication) is enabled,
  the [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  will be returned in the response body and can be used to authorized critical requests.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"name":"locale","in":"query","required":false,"schema":{"type":"string"}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"password":{"type":"string"}},"required":["password"],"title":"StepUpRequest"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Authentication successful.","content":{"*/*":{"schema":{"type":"object","properties":{"stepUpToken":{"type":"string"},"twoFactorRequired":{"type":"boolean"},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","email"]}},"preferredTwoFactorMethod":{"type":"string","enum":["totp","email"]},"twoFactorAuthenticationToken":{"type":"string"}},"required":["twoFactorRequired"],"title":"StepUpResponse"}}}},"400":{"description":"The following error codes correspond to this status:\n* **`MISSING_PASSWORD_PARAMETER`:** Indicates that the request is missing a password parameter.\n* **`NO_PASSWORD`:** Indicates that the user does not have a password set.","content":{"application/json":{"schema":{}}}},"401":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_EXPIRED`:** Indicates that the access token is expired.\n* **`ACCESS_TOKEN_INVALID`:** Indicates that the access token cannot be decoded.\n* **`INVALID_CREDENTIALS`:** Invalid credentials.\n* **`SESSION_EXPIRED`:** Indicates that the user's session has expired.","content":{"application/json":{"schema":{}}}},"403":{"description":"The following error codes correspond to this status:\n* **`STEP_UP_TOKEN_CREATION_FORBIDDEN`:** Thrown when a step-up token is requested from an illegal context.","content":{"application/json":{"schema":{}}}},"404":{"description":"The following error codes correspond to this status:\n* **`PRINCIPAL_NOT_FOUND`:** No principal with specified ID found.","content":{"application/json":{"schema":{}}}},"500":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_ALLOWLIST_READING_FAILURE`:** Represents an exception indicating a failure when reading the allowlist for an access token cache.\n* **`DATABASE_FAILURE`:** Exception representing a general failure related to database operations.\n* **`DATABASE_ENCRYPTION_FAILURE`:** Exception representing a general failure related to database encryption operations.\n* **`TWO_FACTOR_AUTHENTICATION_TOKEN_ENCODING_FAILURE`:** Represents an exception that occurs during the encoding process of an two-factor authentication token.\n* **`TWO_FACTOR_AUTHENTICATION_TOKEN_SECRET_FAILURE`:** Represents an exception that occurs when there is a failure related to the secret required for creating an  two-factor authentication token.\n* **`HASH_FAILURE`:** Exception representing a general failure related to hashing operations.\n* **`STEP_UP_TOKEN_ENCODING_FAILURE`:** Represents an exception that occurs during the encoding process of a step-up token.\n* **`STEP_UP_TOKEN_SECRET_FAILURE`:** Represents an exception that occurs when there is a failure related to the secret required for creating a refresh token.","content":{"application/json":{"schema":{}}}}}}
>
  
</StatusCodes>


      