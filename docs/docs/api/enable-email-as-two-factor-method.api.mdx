---
id: enable-email-as-two-factor-method
title: "Enable Email as 2FA Method"
description: "Enable email as 2FA method."
sidebar_label: "Enable Email as 2FA Method"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Enable Email as 2FA Method"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/email/enable"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Enable email as 2FA method.

Learn more about email as 2FA method [here](../../docs/guides/auth/two-factor#email).

A [security alert](../../docs/guides/auth/security-alerts#2fa-specific-alerts)
will be sent to the user's email if this setting is enabled and
email is [enabled and configured correctly](../../docs/guides/email/configuration).

### Requirements
- The user can authenticate using password. 2FA will not work with OAuth2. 
  The OAuth2 provider will validate the second factor if the user enabled it for the provider.

>**Note:** If [email is enabled](../../docs/guides/email/configuration) in your application,
>email is 2FA method will be enabled by default for every user that registers with a password.

### Locale

A locale can be specified for this request. 
The email will be sent in the specified locale.
You can learn more about locale in emails [here](../../docs/guides/email/templates).

If no locale is specified, the applications default locale will be used.
You can learn more about configuring the default locale [here](../../docs/guides/configuration).

### Tokens
- A valid [`AccessToken`](../../docs/guides/auth/tokens#access-token) is required.
- A valid [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  is required. This token should match user and session contained in the `AccessToken`.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"name":"locale","in":"query","required":false,"schema":{"type":"string"}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string"}},"required":["code"],"title":"EnableEmailTwoFactorMethodRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Updated user information.","content":{"*/*":{"schema":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"type":"string"},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","email"]},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","email"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"canEdit":{"type":"boolean"},"canDelete":{"type":"boolean"}},"required":["canDelete","canEdit","ownerId","visibility"],"title":"ContentAccessDetailsResponse"},"renditions":{"type":"object","additionalProperties":{"type":"object","properties":{"key":{"type":"string"},"size":{"type":"integer","format":"int64"},"contentType":{"type":"string"},"url":{"type":"string"},"width":{"type":"integer","format":"int32"},"height":{"type":"integer","format":"int32"}},"required":["contentType","key","size","url"],"title":"FileRenditionResponse"}},"originalUrl":{"type":"string"}},"required":["access","createdAt","id","key","renditions","updatedAt"],"title":"FileMetadataResponse"},"createdAt":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["createdAt","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorMethods"],"title":"PrincipalResponse"}}}},"304":{"description":"The following error codes correspond to this status:\n* **`TWO_FACTOR_METHOD_ALREADY_ENABLED`:** Two-factor authentication method is already enabled.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"400":{"description":"The following error codes correspond to this status:\n* **`NO_PASSWORD_PROVIDER`:** The user needs to set a password in to perform this action.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_EXPIRED`:** Indicates that the access token is expired.\n* **`ACCESS_TOKEN_INVALID`:** Indicates that the access token cannot be decoded.\n* **`AUTHENTICATION_REQUIRED`:** User is not authenticated.\n* **`STEP_UP_TOKEN_EXPIRED`:** Indicates that the step-up token is expired.\n* **`STEP_UP_TOKEN_INVALID`:** Indicates that the step-up token cannot be decoded.\n* **`STEP_UP_TOKEN_MISSING`:** Thrown when the step-up token is missing.\n* **`TWO_FACTOR_CODE_EXPIRED`:** Two-factor code has expired.\n* **`WRONG_TWO_FACTOR_CODE`:** Wrong two-factor code.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"404":{"description":"The following error codes correspond to this status:\n* **`USER_NOT_FOUND`:** User not found.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"500":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_ALLOWLIST_READING_FAILURE`:** Represents an exception indicating a failure when reading the allowlist for an access token cache.\n* **`DATABASE_FAILURE`:** Exception representing a general failure related to database operations.\n* **`DATABASE_ENCRYPTION_FAILURE`:** Exception representing a general failure related to database encryption operations.\n* **`INVALID_USER_DOCUMENT`:** A requested user document was stored in an invalid format.\n* **`POST_COMMIT_SIDE_EFFECT_FAILURE`:** Exception representing a failure to perform a side effect after a successful database operation.\n* **`INVALID_PRINCIPAL_DOCUMENT`:** A requested principal document was stored in an invalid format.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      