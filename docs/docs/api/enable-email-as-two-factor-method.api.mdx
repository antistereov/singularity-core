---
id: enable-email-as-two-factor-method
title: "Enable Email as 2FA Method"
description: "Enable email as 2FA method."
sidebar_label: "Enable Email as 2FA Method"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Enable Email as 2FA Method"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/email/enable"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Enable email as 2FA method.

Learn more about email as 2FA method [here](../../docs/guides/auth/two-factor#email).

A [security alert](../../docs/guides/auth/security-alerts#2fa-specific-alerts)
will be sent to the user's email if this setting is enabled and
email is [enabled and configured correctly](../../docs/guides/email/configuration).

### Requirements
- The user can authenticate using password. 2FA will not work with OAuth2. 
  The OAuth2 provider will validate the second factor if the user enabled it for the provider.

>**Note:** If [email is enabled](../../docs/guides/email/configuration) in your application,
>email is 2FA method will be enabled by default for every user that registers with a password.

### Locale

A locale can be specified for this request. 
The email will be sent in the specified locale.
You can learn more about locale in emails [here](../../docs/guides/email/templates).

If no locale is specified, the applications default locale will be used.
You can learn more about configuring the default locale [here](../../docs/guides/configuration).

### Tokens
- A valid [`AccessToken`](../../docs/guides/auth/tokens#access-token) is required.
- A valid [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  is required. This token should match user and session contained in the `AccessToken`.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"name":"locale","in":"query","required":false,"schema":{"type":"string"}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string"}},"required":["code"],"title":"EnableEmailTwoFactorMethodRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Updated user information.","content":{"*/*":{"schema":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"oneOf":[{"allOf":[{"type":"object","properties":{"value":{"type":"string"},"logger":{"type":"object","properties":{"isLoggingOff":{"type":"boolean","deprecated":true,"description":"Use isLoggingOff() instead"},"name":{"type":"string"},"isInfoEnabled":{"type":"boolean","deprecated":true,"description":"Use isInfoEnabled() instead"},"isDebugEnabled":{"type":"boolean","deprecated":true,"description":"Use isDebugEnabled() instead"},"isErrorEnabled":{"type":"boolean","deprecated":true,"description":"Use isErrorEnabled() instead"},"isTraceEnabled":{"type":"boolean","deprecated":true,"description":"Use isTraceEnabled() instead"},"isWarnEnabled":{"type":"boolean","deprecated":true,"description":"Use isWarnEnabled() instead"}},"required":["isDebugEnabled","isErrorEnabled","isInfoEnabled","isLoggingOff","isTraceEnabled","isWarnEnabled","name"],"title":"KLogger"}},"required":["logger","value"],"title":"Role"}],"enum":["GUEST"],"title":"Guest"},{"allOf":[{"type":"object","properties":{"value":{"type":"string"},"logger":{"type":"object","properties":{"isLoggingOff":{"type":"boolean","deprecated":true,"description":"Use isLoggingOff() instead"},"name":{"type":"string"},"isInfoEnabled":{"type":"boolean","deprecated":true,"description":"Use isInfoEnabled() instead"},"isDebugEnabled":{"type":"boolean","deprecated":true,"description":"Use isDebugEnabled() instead"},"isErrorEnabled":{"type":"boolean","deprecated":true,"description":"Use isErrorEnabled() instead"},"isTraceEnabled":{"type":"boolean","deprecated":true,"description":"Use isTraceEnabled() instead"},"isWarnEnabled":{"type":"boolean","deprecated":true,"description":"Use isWarnEnabled() instead"}},"required":["isDebugEnabled","isErrorEnabled","isInfoEnabled","isLoggingOff","isTraceEnabled","isWarnEnabled","name"],"title":"KLogger"}},"required":["logger","value"],"title":"Role"}],"enum":["USER","ADMIN"],"title":"User"}]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","email"]},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","email"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"canEdit":{"type":"boolean"},"canDelete":{"type":"boolean"}},"required":["canDelete","canEdit","ownerId","visibility"],"title":"ContentAccessDetailsResponse"},"renditions":{"type":"object","additionalProperties":{"type":"object","properties":{"key":{"type":"string"},"size":{"type":"integer","format":"int64"},"contentType":{"type":"string"},"url":{"type":"string"},"width":{"type":"integer","format":"int32"},"height":{"type":"integer","format":"int32"}},"required":["contentType","key","size","url"],"title":"FileRenditionResponse"}},"originalUrl":{"type":"string"}},"required":["access","createdAt","id","key","renditions","updatedAt"],"title":"FileMetadataResponse"},"createdAt":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["createdAt","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorMethods"],"title":"UserResponse"}}}},"207":{"description":"The following error codes correspond to this status:\n* **`POST_COMMIT_SIDE_EFFECT_FAILURE`:** Exception representing a failure to perform a side effect after a successful database operation.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"304":{"description":"The following error codes correspond to this status:\n* **`TWO_FACTOR_METHOD_ALREADY_ENABLED`:** Two-factor authentication method is already enabled.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"400":{"description":"The following error codes correspond to this status:\n* **`NO_PASSWORD_PROVIDER`:** The user needs to set a password in to perform this action.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"401":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_EXPIRED`:** Indicates that the access token is expired.\n* **`ACCESS_TOKEN_INVALID`:** Indicates that the access token cannot be decoded.\n* **`AUTHENTICATION_REQUIRED`:** User is not authenticated.\n* **`STEP_UP_TOKEN_EXPIRED`:** Indicates that the step-up token is expired.\n* **`STEP_UP_TOKEN_INVALID`:** Indicates that the step-up token cannot be decoded.\n* **`STEP_UP_TOKEN_MISSING`:** Thrown when the step-up token is missing.\n* **`TWO_FACTOR_CODE_EXPIRED`:** Two-factor code has expired.\n* **`WRONG_TWO_FACTOR_CODE`:** Wrong two-factor code.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"404":{"description":"The following error codes correspond to this status:\n* **`USER_NOT_FOUND`:** User not found.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}},"500":{"description":"The following error codes correspond to this status:\n* **`ACCESS_TOKEN_ALLOWLIST_READING_FAILURE`:** Represents an exception indicating a failure when reading the allowlist for an access token cache.\n* **`DATABASE_FAILURE`:** Exception representing a general failure related to database operations.\n* **`DATABASE_ENCRYPTION_FAILURE`:** Exception representing a general failure related to database encryption operations.\n* **`INVALID_USER_DOCUMENT`:** A requested user document was stored in an invalid format.\n* **`INVALID_PRINCIPAL_DOCUMENT`:** A requested principal document was stored in an invalid format.","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"code":{"type":"string"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"}},"required":["code","error","status","timestamp"],"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      