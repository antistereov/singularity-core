---
id: enable-email-as-two-factor-method
title: "Enable Email as 2FA Method"
description: "Enable email as 2FA method."
sidebar_label: "Enable Email as 2FA Method"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/singularity-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Enable Email as 2FA Method"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/auth/2fa/email/enable"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Enable email as 2FA method.

Learn more about email as 2FA method [here](../../docs/guides/auth/two-factor#email).

A [security alert](../../docs/guides/auth/security-alerts#2fa-specific-alerts)
will be sent to the user's email if this setting is enabled and
email is [enabled and configured correctly](../../docs/guides/email/configuration).

### Requirements
- The user can authenticate using password. 2FA will not work with OAuth2. 
  The OAuth2 provider will validate the second factor if the user enabled it for the provider.

>**Note:** If [email is enabled](../../docs/guides/email/configuration) in your application,
>email is 2FA method will be enabled by default for every user that registers with a password.

### Locale

A locale can be specified for this request. 
The email will be sent in the specified locale.
You can learn more about locale in emails [here](../../docs/guides/email/templates).

If no locale is specified, the applications default locale will be used.
You can learn more about configuring the default locale [here](../../docs/guides/configuration).

### Tokens
- A valid [`AccessToken`](../../docs/guides/auth/tokens#access-token) is required.
- A valid [`StepUpToken`](../../docs/guides/auth/tokens#step-up-token)
  is required. This token should match user and session contained in the `AccessToken`.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"name":"locale","in":"query","required":false,"schema":{"type":"string"}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string"}},"required":["code"],"title":"EnableEmailTwoFactorMethodRequest"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Updated user information.","content":{"*/*":{"schema":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"name":{"type":"string"},"email":{"type":"string"},"identityProviders":{"type":"array","items":{"type":"string"}},"roles":{"type":"array","items":{"oneOf":[{"allOf":[{"type":"object","properties":{"value":{"type":"string"},"logger":{"type":"object","properties":{"isLoggingOff":{"type":"boolean","deprecated":true,"description":"Use isLoggingOff() instead"},"isTraceEnabled":{"type":"boolean","deprecated":true,"description":"Use isTraceEnabled() instead"},"isWarnEnabled":{"type":"boolean","deprecated":true,"description":"Use isWarnEnabled() instead"},"isInfoEnabled":{"type":"boolean","deprecated":true,"description":"Use isInfoEnabled() instead"},"isDebugEnabled":{"type":"boolean","deprecated":true,"description":"Use isDebugEnabled() instead"},"isErrorEnabled":{"type":"boolean","deprecated":true,"description":"Use isErrorEnabled() instead"},"name":{"type":"string"}},"required":["isDebugEnabled","isErrorEnabled","isInfoEnabled","isLoggingOff","isTraceEnabled","isWarnEnabled","name"],"title":"KLogger"}},"required":["logger","value"],"title":"Role"}],"enum":["GUEST"],"title":"Guest"},{"allOf":[{"type":"object","properties":{"value":{"type":"string"},"logger":{"type":"object","properties":{"isLoggingOff":{"type":"boolean","deprecated":true,"description":"Use isLoggingOff() instead"},"isTraceEnabled":{"type":"boolean","deprecated":true,"description":"Use isTraceEnabled() instead"},"isWarnEnabled":{"type":"boolean","deprecated":true,"description":"Use isWarnEnabled() instead"},"isInfoEnabled":{"type":"boolean","deprecated":true,"description":"Use isInfoEnabled() instead"},"isDebugEnabled":{"type":"boolean","deprecated":true,"description":"Use isDebugEnabled() instead"},"isErrorEnabled":{"type":"boolean","deprecated":true,"description":"Use isErrorEnabled() instead"},"name":{"type":"string"}},"required":["isDebugEnabled","isErrorEnabled","isInfoEnabled","isLoggingOff","isTraceEnabled","isWarnEnabled","name"],"title":"KLogger"}},"required":["logger","value"],"title":"Role"}],"enum":["USER","ADMIN"],"title":"User"}]},"uniqueItems":true},"emailVerified":{"type":"boolean"},"lastActive":{"type":"string"},"twoFactorAuthEnabled":{"type":"boolean"},"preferredTwoFactorMethod":{"type":"string","enum":["totp","email"]},"twoFactorMethods":{"type":"array","items":{"type":"string","enum":["totp","email"]}},"avatar":{"type":"object","properties":{"id":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"key":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"access":{"type":"object","properties":{"ownerId":{"type":"object","properties":{"timestamp":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date-time"}},"title":"ObjectId"},"visibility":{"type":"string","enum":["PRIVATE","PUBLIC","SHARED"]},"canEdit":{"type":"boolean"},"canDelete":{"type":"boolean"}},"required":["canDelete","canEdit","ownerId","visibility"],"title":"ContentAccessDetailsResponse"},"renditions":{"type":"object","additionalProperties":{"type":"object","properties":{"key":{"type":"string"},"size":{"type":"integer","format":"int64"},"contentType":{"type":"string"},"url":{"type":"string"},"width":{"type":"integer","format":"int32"},"height":{"type":"integer","format":"int32"}},"required":["contentType","key","size","url"],"title":"FileRenditionResponse"}}},"required":["access","createdAt","id","key","renditions","updatedAt"],"title":"FileMetadataResponse"},"createdAt":{"type":"string"},"groups":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["createdAt","emailVerified","groups","id","identityProviders","lastActive","name","roles","twoFactorAuthEnabled","twoFactorMethods"],"title":"UserResponse"}}}},"207":{"description":"A specific domain error occurred (see list below):\n* **`POST_COMMIT_SIDE_EFFECT_FAILURE`:** Exception representing a failure to perform a side effect after a successful database operation.\n* **`USER_AVATAR_MAPPING_FAILURE`:** Failed to map avatar metadata.\n* **`POST_COMMIT_SIDE_EFFECT_FAILURE`:** Exception representing a failure to perform a side effect after a successful database operation.\n* **`USER_AVATAR_MAPPING_FAILURE`:** Failed to map avatar metadata.","content":{"application/json":{"schema":{}}}},"304":{"description":"A specific domain error occurred (see list below):\n* **`TWO_FACTOR_METHOD_ALREADY_ENABLED`:** Two-factor authentication method is already enabled.\n* **`TWO_FACTOR_METHOD_ALREADY_ENABLED`:** Two-factor authentication method is already enabled.","content":{"application/json":{"schema":{}}}},"400":{"description":"A specific domain error occurred (see list below):\n* **`NO_PASSWORD_PROVIDER`:** The user needs to set a password in to perform this action.\n* **`NO_PASSWORD_PROVIDER`:** The user needs to set a password in to perform this action.","content":{"application/json":{"schema":{}}}},"401":{"description":"A specific domain error occurred (see list below):\n* **`ACCESS_TOKEN_EXPIRED`:** Indicates that the access token is expired.\n* **`ACCESS_TOKEN_INVALID`:** Indicates that the access token cannot be decoded.\n* **`STEP_UP_TOKEN_EXPIRED`:** Indicates that the step-up token is expired.\n* **`STEP_UP_TOKEN_INVALID`:** Indicates that the step-up token cannot be decoded.\n* **`STEP_UP_TOKEN_MISSING`:** Thrown when the step-up token is missing.\n* **`TWO_FACTOR_CODE_EXPIRED`:** Two-factor code has expired.\n* **`WRONG_TWO_FACTOR_CODE`:** Wrong two-factor code.\n* **`ACCESS_TOKEN_EXPIRED`:** Indicates that the access token is expired.\n* **`ACCESS_TOKEN_INVALID`:** Indicates that the access token cannot be decoded.\n* **`STEP_UP_TOKEN_EXPIRED`:** Indicates that the step-up token is expired.\n* **`STEP_UP_TOKEN_INVALID`:** Indicates that the step-up token cannot be decoded.\n* **`STEP_UP_TOKEN_MISSING`:** Thrown when the step-up token is missing.\n* **`TWO_FACTOR_CODE_EXPIRED`:** Two-factor code has expired.\n* **`WRONG_TWO_FACTOR_CODE`:** Wrong two-factor code.","content":{"application/json":{"schema":{}}}},"404":{"description":"A specific domain error occurred (see list below):\n* **`USER_NOT_FOUND`:** User not found.\n* **`USER_NOT_FOUND`:** User not found.","content":{"application/json":{"schema":{}}}},"500":{"description":"A specific domain error occurred (see list below):\n* **`ACCESS_TOKEN_ALLOWLIST_READING_FAILURE`:** Represents an exception indicating a failure when reading the allowlist for an access token cache.\n* **`DATABASE_FAILURE`:** Exception representing a general failure related to database operations.\n* **`DATABASE_ENCRYPTION_FAILURE`:** Exception representing a general failure related to database encryption operations.\n* **`DATABASE_FAILURE`:** Exception representing a general failure related to database operations.\n* **`INVALID_USER_DOCUMENT`:** A requested user document was stored in an invalid format.\n* **`INVALID_PRINCIPAL_DOCUMENT`:** A requested principal document was stored in an invalid format.\n* **`ACCESS_TOKEN_ALLOWLIST_READING_FAILURE`:** Represents an exception indicating a failure when reading the allowlist for an access token cache.\n* **`DATABASE_FAILURE`:** Exception representing a general failure related to database operations.\n* **`DATABASE_ENCRYPTION_FAILURE`:** Exception representing a general failure related to database encryption operations.\n* **`DATABASE_FAILURE`:** Exception representing a general failure related to database operations.\n* **`INVALID_USER_DOCUMENT`:** A requested user document was stored in an invalid format.\n* **`INVALID_PRINCIPAL_DOCUMENT`:** A requested principal document was stored in an invalid format.","content":{"application/json":{"schema":{}}}}}}
>
  
</StatusCodes>


      